{"ast":null,"code":"import { ref, reactive, onMounted, getCurrentInstance } from 'vue';\nimport { Close, Check, EditPen, Document } from '@element-plus/icons-vue';\nimport Editor from \"@/components/Editor\";\nexport default {\n  components: {\n    Editor,\n    Close,\n    Check,\n    EditPen,\n    Document\n  },\n  setup() {\n    const {\n      proxy\n    } = getCurrentInstance();\n\n    // 响应式数据\n    const data = reactive({});\n    const saveApi = ref('/notice/save');\n    const updateApi = ref('/notice/update');\n    const isUpdate = ref(false);\n\n    // 方法定义\n    const saveOperation = () => {\n      if (isUpdate.value) {\n        update();\n      } else {\n        save();\n      }\n    };\n    const loadOperation = () => {\n      const operation = sessionStorage.getItem('noticeOperation');\n      console.log(operation);\n      if (operation === 'update') {\n        const notice = sessionStorage.getItem('noticeInfo');\n        Object.assign(data, JSON.parse(notice));\n        isUpdate.value = true;\n      }\n    };\n    const update = () => {\n      proxy.$axios.put(updateApi.value, data).then(response => {\n        if (response.data.code === 200) {\n          proxy.$swal.fire({\n            title: '公告修改',\n            text: '修改成功',\n            icon: 'success',\n            showConfirmButton: false,\n            timer: 1000\n          });\n          // 返回上一级\n          proxy.$router.go(-1);\n        }\n      });\n    };\n    const save = () => {\n      proxy.$axios.post(saveApi.value, data).then(response => {\n        if (response.data.code === 200) {\n          proxy.$swal.fire({\n            title: '公告新增',\n            text: '新增成功',\n            icon: 'success',\n            showConfirmButton: false,\n            timer: 1000\n          });\n          // 返回上一级\n          proxy.$router.go(-1);\n        }\n      });\n    };\n    const returnToDo = () => {\n      proxy.$router.go(-1);\n    };\n\n    // 生命周期\n    onMounted(() => {\n      loadOperation();\n    });\n    return {\n      data,\n      saveApi,\n      updateApi,\n      isUpdate,\n      saveOperation,\n      loadOperation,\n      update,\n      save,\n      returnToDo\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","getCurrentInstance","Close","Check","EditPen","Document","Editor","components","setup","proxy","data","saveApi","updateApi","isUpdate","saveOperation","value","update","save","loadOperation","operation","sessionStorage","getItem","console","log","notice","Object","assign","JSON","parse","$axios","put","then","response","code","$swal","fire","title","text","icon","showConfirmButton","timer","$router","go","post","returnToDo"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\views\\admin\\CreateNotice.vue"],"sourcesContent":["<template>\n    <el-row class=\"common-container\">\n        <el-row class=\"action-bar\">\n            <div class=\"btn-group\">\n                <el-button class=\"cancel-btn\" size=\"small\" @click=\"returnToDo\">\n                    <el-icon><Close /></el-icon> 取消操作\n                </el-button>\n                <el-button class=\"confirm-btn\" type=\"primary\" size=\"small\" @click=\"saveOperation\">\n                    <el-icon><Check /></el-icon> {{ isUpdate ? '确认修改' : '确认新增' }}\n                </el-button>\n            </div>\n        </el-row>\n        <el-row style=\"margin: 10px 16px;\">\n            <el-row class=\"form-item\">\n                <span class=\"title-label\"><el-icon><EditPen /></el-icon> 公告标题</span>\n                <el-input class=\"title-input\" v-model=\"data.name\" placeholder=\"请输入公告标题\" :maxlength=\"50\" show-word-limit></el-input>\n            </el-row>\n            <el-row class=\"form-item\">\n                <span class=\"title-label\"><el-icon><Document /></el-icon> 公告内容</span>\n                <div class=\"editor-container\">\n                    <Editor v-model=\"data.content\"></Editor>\n                </div>\n            </el-row>\n        </el-row>\n    </el-row>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, getCurrentInstance } from 'vue'\nimport { Close, Check, EditPen, Document } from '@element-plus/icons-vue'\nimport Editor from \"@/components/Editor\"\n\nexport default {\n    components: { \n        Editor,\n        Close,\n        Check, \n        EditPen,\n        Document\n    },\n    setup() {\n        const { proxy } = getCurrentInstance()\n        \n        // 响应式数据\n        const data = reactive({})\n        const saveApi = ref('/notice/save')\n        const updateApi = ref('/notice/update')\n        const isUpdate = ref(false)\n\n        // 方法定义\n        const saveOperation = () => {\n            if (isUpdate.value) {\n                update()\n            } else {\n                save()\n            }\n        }\n\n        const loadOperation = () => {\n            const operation = sessionStorage.getItem('noticeOperation')\n            console.log(operation)\n            if (operation === 'update') {\n                const notice = sessionStorage.getItem('noticeInfo')\n                Object.assign(data, JSON.parse(notice))\n                isUpdate.value = true\n            }\n        }\n        const update = () => {\n            proxy.$axios.put(updateApi.value, data).then(response => {\n                if (response.data.code === 200) {\n                    proxy.$swal.fire({\n                        title: '公告修改',\n                        text: '修改成功',\n                        icon: 'success',\n                        showConfirmButton: false,\n                        timer: 1000,\n                    })\n                    // 返回上一级\n                    proxy.$router.go(-1)\n                }\n            })\n        }\n\n        const save = () => {\n            proxy.$axios.post(saveApi.value, data).then(response => {\n                if (response.data.code === 200) {\n                    proxy.$swal.fire({\n                        title: '公告新增',\n                        text: '新增成功',\n                        icon: 'success',\n                        showConfirmButton: false,\n                        timer: 1000,\n                    })\n                    // 返回上一级\n                    proxy.$router.go(-1)\n                }\n            })\n        }\n\n        const returnToDo = () => {\n            proxy.$router.go(-1)\n        }\n\n        // 生命周期\n        onMounted(() => {\n            loadOperation()\n        })\n\n        return {\n            data,\n            saveApi,\n            updateApi,\n            isUpdate,\n            saveOperation,\n            loadOperation,\n            update,\n            save,\n            returnToDo\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.common-container {\n    background-color: #FFFFFF;\n    padding: 20px 0;\n    border-radius: 16px;\n    width: 100%;\n    max-width: 1200px;\n    margin: 0 auto;\n    box-sizing: border-box;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n}\n\n.action-bar {\n    padding: 10px 16px;\n    display: flex;\n    justify-content: flex-end;\n    border-bottom: 1px solid #f0f0f0;\n    margin-bottom: 15px;\n}\n\n.btn-group {\n    display: flex;\n    gap: 10px;\n}\n\n.cancel-btn {\n    color: #606266;\n    background-color: #f5f7fa;\n    border-color: #dcdfe6;\n    border-radius: 20px;\n    padding: 8px 15px;\n    font-size: 13px;\n    transition: all 0.3s;\n    \n    &:hover {\n        color: #409EFF;\n        border-color: #c6e2ff;\n        background-color: #ecf5ff;\n    }\n    \n    &:focus {\n        outline: none;\n    }\n}\n\n.confirm-btn {\n    color: white;\n    background-color: #409EFF;\n    border-radius: 20px;\n    padding: 8px 15px;\n    font-size: 13px;\n    border: none;\n    box-shadow: 0 2px 6px rgba(64, 158, 255, 0.2);\n    transition: all 0.3s;\n    \n    &:hover {\n        background-color: #66b1ff;\n        transform: translateY(-1px);\n        box-shadow: 0 4px 8px rgba(64, 158, 255, 0.3);\n    }\n    \n    &:focus {\n        outline: none;\n    }\n}\n\n.form-item {\n    margin-bottom: 20px;\n}\n\n.title-label {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n    font-size: 14px;\n    color: #606266;\n    font-weight: 500;\n    \n    .el-icon {\n        margin-right: 5px;\n        color: #409EFF;\n    }\n}\n\n.title-input {\n    width: 100%;\n    font-size: 14px;\n}\n\n.editor-container {\n    margin-top: 10px;\n    border: 1px solid #dcdfe6;\n    border-radius: 4px;\n    overflow: hidden;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}