{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user-info\"\n};\nconst _hoisted_2 = {\n  class: \"username\"\n};\nconst _hoisted_3 = {\n  class: \"card-status\"\n};\nconst _hoisted_4 = {\n  class: \"card-content\"\n};\nconst _hoisted_5 = {\n  class: \"content-text\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"card-reply\"\n};\nconst _hoisted_7 = {\n  class: \"reply-icon\"\n};\nconst _hoisted_8 = {\n  class: \"reply-text\"\n};\nconst _hoisted_9 = {\n  class: \"card-footer\"\n};\nconst _hoisted_10 = {\n  class: \"time-info\"\n};\nconst _hoisted_11 = {\n  class: \"time-item\"\n};\nconst _hoisted_12 = {\n  class: \"content-section\"\n};\nconst _hoisted_13 = {\n  class: \"card-actions\"\n};\nconst _hoisted_14 = {\n  class: \"dialog-header\"\n};\nconst _hoisted_15 = {\n  class: \"dialog-title-wrapper\"\n};\nconst _hoisted_16 = {\n  class: \"dialog-content\"\n};\nconst _hoisted_17 = {\n  class: \"original-content\"\n};\nconst _hoisted_18 = {\n  class: \"content-text\"\n};\nconst _hoisted_19 = {\n  class: \"reply-area\"\n};\nconst _hoisted_20 = {\n  class: \"char-counter\"\n};\nconst _hoisted_21 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_Comment = _resolveComponent(\"Comment\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_Timer = _resolveComponent(\"Timer\");\n  const _component_ChatDotRound = _resolveComponent(\"ChatDotRound\");\n  const _component_ChatLineRound = _resolveComponent(\"ChatLineRound\");\n  const _component_Delete = _resolveComponent(\"Delete\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_Close = _resolveComponent(\"Close\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createBlock(_component_el_row, {\n    class: \"proposal-container\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_row, {\n      class: \"search-area\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_row, null, {\n        default: _withCtx(() => [_cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n          class: \"top-bar\"\n        }, \"反馈\", -1)), _createVNode(_component_el_input, {\n          size: \"small\",\n          style: {\n            \"width\": \"188px\",\n            \"margin-right\": \"10px\"\n          },\n          modelValue: $setup.readingProposalQueryDto.content,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.readingProposalQueryDto.content = $event),\n          placeholder: \"问题\",\n          clearable: \"\",\n          onClear: $setup.handleFilterClear\n        }, null, 8, [\"modelValue\", \"onClear\"]), _createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $setup.handleFilter,\n          class: \"no-icon\",\n          style: {\n            \"padding-left\": \"15px\",\n            \"padding-right\": \"15px\"\n          }\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"立即查询\", -1)])),\n          _: 1,\n          __: [5]\n        }, 8, [\"onClick\"])]),\n        _: 1,\n        __: [6]\n      })]),\n      _: 1\n    }), _createVNode(_component_el_row, {\n      class: \"cards-container\"\n    }, {\n      default: _withCtx(() => [$setup.tableData.length === 0 ? (_openBlock(), _createBlock(_component_el_empty, {\n        key: 0,\n        description: \"暂无反馈数据\"\n      })) : _createCommentVNode(\"\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.tableData, (item, index) => {\n        return _openBlock(), _createBlock(_component_el_col, {\n          xs: 24,\n          sm: 24,\n          md: 24,\n          lg: 12,\n          xl: 8,\n          key: index,\n          class: \"card-col\"\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", {\n            class: _normalizeClass([\"feedback-card\", $setup.getCardColorClass(index)])\n          }, [_createElementVNode(\"div\", {\n            class: _normalizeClass([\"card-header\", $setup.getHeaderColorClass(index)])\n          }, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_avatar, {\n            size: 32,\n            src: item.userAvatar,\n            class: \"avatar\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(item.userName ? item.userName.substring(0, 1) : 'U'), 1)]),\n            _: 2\n          }, 1032, [\"src\"]), _createElementVNode(\"span\", _hoisted_2, _toDisplayString(item.userName), 1)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", {\n            class: _normalizeClass([\"status-tag\", item.isPublish ? 'public-tag' : 'private-tag'])\n          }, _toDisplayString(item.isPublish ? '公开' : '隐私'), 3)])], 2), _createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"h4\", {\n            class: \"section-title\"\n          }, \"反馈内容\", -1)), _createElementVNode(\"div\", _hoisted_5, _toDisplayString(item.content), 1)]), item.replyContent ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_cache[8] || (_cache[8] = _createElementVNode(\"h4\", {\n            class: \"section-title\"\n          }, \"回复内容\", -1)), _createElementVNode(\"div\", {\n            class: _normalizeClass([\"reply-container\", $setup.getReplyColorClass(index)])\n          }, [_createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Comment)]),\n            _: 1\n          })]), _createElementVNode(\"div\", _hoisted_8, _toDisplayString(item.replyContent), 1)], 2)])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Timer)]),\n            _: 1\n          }), _createTextVNode(\" \" + _toDisplayString(item.createTime), 1)]), _createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_ChatDotRound)]),\n            _: 1\n          }), _createTextVNode(\" \" + _toDisplayString(item.content), 1)])]), _createElementVNode(\"div\", _hoisted_13, [item.replyTime === null ? (_openBlock(), _createBlock(_component_el_button, {\n            key: 0,\n            size: \"small\",\n            type: \"success\",\n            plain: \"\",\n            class: \"action-btn\",\n            onClick: $event => $setup.handleEdit(item)\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [_createVNode(_component_ChatLineRound)]),\n              _: 1\n            }), _cache[9] || (_cache[9] = _createTextVNode(\"回复 \", -1))]),\n            _: 2,\n            __: [9]\n          }, 1032, [\"onClick\"])) : _createCommentVNode(\"\", true), _createVNode(_component_el_button, {\n            size: \"small\",\n            type: \"danger\",\n            plain: \"\",\n            class: \"action-btn\",\n            onClick: $event => $setup.handleDelete(item)\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [_createVNode(_component_Delete)]),\n              _: 1\n            }), _cache[10] || (_cache[10] = _createTextVNode(\"删除 \", -1))]),\n            _: 2,\n            __: [10]\n          }, 1032, [\"onClick\"])])])], 2)]),\n          _: 2\n        }, 1024);\n      }), 128))]),\n      _: 1\n    }), _createVNode(_component_el_pagination, {\n      class: \"pagination\",\n      onSizeChange: $setup.handleSizeChange,\n      onCurrentChange: $setup.handleCurrentChange,\n      \"current-page\": $setup.currentPage,\n      \"page-sizes\": [4, 8],\n      \"page-size\": $setup.pageSize,\n      layout: \"total, sizes, prev, pager, next, jumper\",\n      total: $setup.totalItems\n    }, null, 8, [\"onSizeChange\", \"onCurrentChange\", \"current-page\", \"page-size\", \"total\"]), _createVNode(_component_el_dialog, {\n      modelValue: $setup.dialogOperation,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.dialogOperation = $event),\n      width: \"460px\",\n      \"custom-class\": \"reply-dialog\",\n      \"show-close\": false\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_el_icon, {\n        class: \"dialog-icon\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_Comment)]),\n        _: 1\n      }), _cache[11] || (_cache[11] = _createElementVNode(\"span\", {\n        class: \"dialog-title\"\n      }, \"回复反馈\", -1))]), _createVNode(_component_el_icon, {\n        class: \"close-btn\",\n        onClick: _cache[1] || (_cache[1] = $event => $setup.dialogOperation = false)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_Close)]),\n        _: 1\n      })]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n        class: \"content-label\"\n      }, \"原反馈内容：\", -1)), _createElementVNode(\"div\", _hoisted_18, _toDisplayString($setup.data.content), 1)]), _createElementVNode(\"div\", _hoisted_19, [_cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n        class: \"content-label\"\n      }, \"回复内容\", -1)), _createVNode(_component_el_input, {\n        type: \"textarea\",\n        rows: 4,\n        placeholder: \"请输入回复内容...\",\n        modelValue: $setup.data.replyContent,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.data.replyContent = $event)\n      }, null, 8, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_20, _toDisplayString($setup.data.replyContent ? $setup.data.replyContent.length : 0) + \"/500\", 1)])]), _createElementVNode(\"div\", _hoisted_21, [_createVNode(_component_el_button, {\n        class: \"cancel-btn\",\n        size: \"small\",\n        onClick: _cache[3] || (_cache[3] = $event => $setup.dialogOperation = false)\n      }, {\n        default: _withCtx(() => _cache[14] || (_cache[14] = [_createTextVNode(\"取 消\", -1)])),\n        _: 1,\n        __: [14]\n      }), _createVNode(_component_el_button, {\n        class: \"confirm-btn\",\n        type: \"primary\",\n        size: \"small\",\n        onClick: $setup.updateOperation\n      }, {\n        default: _withCtx(() => _cache[15] || (_cache[15] = [_createTextVNode(\"确 定\", -1)])),\n        _: 1,\n        __: [15]\n      }, 8, [\"onClick\"])])]),\n      _: 1\n    }, 8, [\"modelValue\"])]),\n    _: 1\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_el_row","_createVNode","_createElementVNode","_component_el_input","size","style","$setup","readingProposalQueryDto","content","$event","placeholder","clearable","onClear","handleFilterClear","_component_el_button","type","onClick","handleFilter","_cache","tableData","length","_component_el_empty","description","_createElementBlock","_Fragment","_renderList","item","index","_component_el_col","xs","sm","md","lg","xl","key","_normalizeClass","getCardColorClass","getHeaderColorClass","_hoisted_1","_component_el_avatar","src","userAvatar","userName","substring","_hoisted_2","_toDisplayString","_hoisted_3","isPublish","_hoisted_4","_hoisted_5","replyContent","_hoisted_6","getReplyColorClass","_hoisted_7","_component_el_icon","_component_Comment","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_component_Timer","createTime","_hoisted_12","_component_ChatDotRound","_hoisted_13","replyTime","plain","handleEdit","_component_ChatLineRound","handleDelete","_component_Delete","_component_el_pagination","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","currentPage","pageSize","layout","total","totalItems","_component_el_dialog","dialogOperation","width","_hoisted_14","_hoisted_15","_component_Close","_hoisted_16","_hoisted_17","_hoisted_18","data","_hoisted_19","rows","_hoisted_20","_hoisted_21","updateOperation"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\views\\admin\\ReaderProposalManage.vue"],"sourcesContent":["<template>\n    <el-row class=\"proposal-container\">\n        <el-row class=\"search-area\">\n            <el-row>\n                <span class=\"top-bar\">反馈</span>\n                <el-input size=\"small\" style=\"width: 188px;margin-right: 10px;\"\n                    v-model=\"readingProposalQueryDto.content\" placeholder=\"问题\" clearable @clear=\"handleFilterClear\">\n                </el-input>\n                <el-button type=\"primary\" size=\"small\" @click=\"handleFilter\" class=\"no-icon\" style=\"padding-left: 15px; padding-right: 15px;\">立即查询</el-button>\n            </el-row>\n        </el-row>\n        \n        <!-- 卡片式布局替代表格 -->\n        <el-row class=\"cards-container\">\n            <el-empty v-if=\"tableData.length === 0\" description=\"暂无反馈数据\"></el-empty>\n            <el-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"12\" :xl=\"8\" v-for=\"(item, index) in tableData\" :key=\"index\" class=\"card-col\">\n                <div class=\"feedback-card\" :class=\"getCardColorClass(index)\">\n                    <div class=\"card-header\" :class=\"getHeaderColorClass(index)\">\n                        <div class=\"user-info\">\n                            <el-avatar :size=\"32\" :src=\"item.userAvatar\" class=\"avatar\">\n                                {{ item.userName ? item.userName.substring(0, 1) : 'U' }}\n                            </el-avatar>\n                            <span class=\"username\">{{ item.userName }}</span>\n                        </div>\n                        <div class=\"card-status\">\n                            <span class=\"status-tag\" :class=\"item.isPublish ? 'public-tag' : 'private-tag'\">\n                                {{ item.isPublish ? '公开' : '隐私' }}\n                            </span>\n                        </div>\n                    </div>\n                    \n                    <div class=\"card-content\">\n                        <h4 class=\"section-title\">反馈内容</h4>\n                        <div class=\"content-text\">{{ item.content }}</div>\n                    </div>\n                    \n                    <div class=\"card-reply\" v-if=\"item.replyContent\">\n                        <h4 class=\"section-title\">回复内容</h4>\n                        <div class=\"reply-container\" :class=\"getReplyColorClass(index)\">\n                            <div class=\"reply-icon\">\n                                <el-icon><Comment /></el-icon>\n                            </div>\n                            <div class=\"reply-text\">{{ item.replyContent }}</div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"card-footer\">\n                        <div class=\"time-info\">\n                            <div class=\"time-item\">\n                                <el-icon><Timer /></el-icon>\n                                {{ item.createTime }}\n                            </div>\n                            <div class=\"content-section\">\n                                <el-icon><ChatDotRound /></el-icon>\n                                {{ item.content }}\n                            </div>\n                        </div>\n                        <div class=\"card-actions\">\n                            <el-button v-if=\"item.replyTime === null\" size=\"small\" type=\"success\" plain \n                                class=\"action-btn\" @click=\"handleEdit(item)\">\n                                <el-icon><ChatLineRound /></el-icon>回复\n                            </el-button>\n                            <el-button size=\"small\" type=\"danger\" plain class=\"action-btn\" \n                                @click=\"handleDelete(item)\">\n                                <el-icon><Delete /></el-icon>删除\n                            </el-button>\n                        </div>\n                    </div>\n                </div>\n            </el-col>\n        </el-row>\n        \n        <el-pagination class=\"pagination\" @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[4, 8]\"\n            :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"totalItems\"></el-pagination>\n            \n        <el-dialog v-model=\"dialogOperation\" width=\"460px\" custom-class=\"reply-dialog\" :show-close=\"false\">\n            <div class=\"dialog-header\">\n                <div class=\"dialog-title-wrapper\">\n                    <el-icon class=\"dialog-icon\"><Comment /></el-icon>\n                    <span class=\"dialog-title\">回复反馈</span>\n                </div>\n                                <el-icon class=\"close-btn\" @click=\"dialogOperation = false\"><Close /></el-icon>\n            </div>\n            <div class=\"dialog-content\">\n                <div class=\"original-content\">\n                    <div class=\"content-label\">原反馈内容：</div>\n                    <div class=\"content-text\">{{ data.content }}</div>\n                </div>\n                <div class=\"reply-area\">\n                    <div class=\"content-label\">回复内容</div>\n                    <el-input \n                        type=\"textarea\" \n                        :rows=\"4\" \n                        placeholder=\"请输入回复内容...\" \n                        v-model=\"data.replyContent\">\n                    </el-input>\n                    <div class=\"char-counter\">{{ data.replyContent ? data.replyContent.length : 0 }}/500</div>\n                </div>\n            </div>\n            <div class=\"dialog-footer\">\n                <el-button class=\"cancel-btn\" size=\"small\" @click=\"dialogOperation = false\">取 消</el-button>\n                <el-button class=\"confirm-btn\" type=\"primary\" size=\"small\" @click=\"updateOperation\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </el-row>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, getCurrentInstance } from 'vue'\nimport { Comment, Timer, ChatDotRound, ChatLineRound, Delete, Close } from '@element-plus/icons-vue'\n\nexport default {\n    components: {\n        Comment,\n        Timer,\n        ChatDotRound,\n        ChatLineRound,\n        Delete,\n        Close\n    },\n    setup() {\n        const { proxy } = getCurrentInstance()\n        \n        // 响应式数据\n        const data = ref({})\n        const currentPage = ref(1)\n        const pageSize = ref(7)\n        const totalItems = ref(0)\n        const dialogOperation = ref(false) // 开关\n        const tableData = ref([])\n        const selectedRows = ref([])\n        const readingProposalQueryDto = reactive({}) // 搜索条件\n\n        // 获取卡片颜色类名\n        const getCardColorClass = (index) => {\n            const colorClasses = ['card-red', 'card-yellow', 'card-green', 'card-blue']\n            return colorClasses[index % 4]\n        }\n        \n        // 获取卡片头部颜色类名\n        const getHeaderColorClass = (index) => {\n            const headerClasses = ['header-red', 'header-yellow', 'header-green', 'header-blue']\n            return headerClasses[index % 4]\n        }\n        \n        // 获取回复容器颜色类名\n        const getReplyColorClass = (index) => {\n            const replyClasses = ['reply-red', 'reply-yellow', 'reply-green', 'reply-blue']\n            return replyClasses[index % 4]\n        }\n\n        // 批量删除数据\n        const batchDelete = async () => {\n            if (!selectedRows.value.length) {\n                proxy.$message(`未选中任何数据`)\n                return\n            }\n            const confirmed = await proxy.$swalConfirm({\n                title: '删除反馈数据',\n                text: `删除后不可恢复，是否继续？`,\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonText: '确认删除',\n                cancelButtonText: '取消',\n                confirmButtonColor: '#f56c6c',\n                cancelButtonColor: '#909399',\n                customClass: {\n                    popup: 'custom-delete-popup',\n                    confirmButton: 'custom-delete-confirm-button',\n                    cancelButton: 'custom-delete-cancel-button',\n                    title: 'custom-delete-title',\n                    content: 'custom-delete-content',\n                    icon: 'custom-delete-icon'\n                },\n                buttonsStyling: true,\n                iconColor: '#f56c6c',\n                backdrop: `rgba(0,0,0,0.4)`,\n                heightAuto: false,\n                padding: '2em'\n            })\n            \n            if (confirmed) {\n                try {\n                    let ids = selectedRows.value.map(entity => entity.id)\n                    const response = await proxy.$axios.post(`/readerProposal/batchDelete`, ids)\n                    if (response.data.code === 200) {\n                        proxy.$swal.fire({\n                            title: '删除成功',\n                            text: response.data.msg,\n                            icon: 'success',\n                            showConfirmButton: false,\n                            timer: 2000,\n                        })\n                        fetchFreshData()\n                        return\n                    }\n                } catch (e) {\n                    proxy.$swal.fire({\n                        title: '错误提示',\n                        text: e,\n                        icon: 'error',\n                        showConfirmButton: false,\n                        timer: 2000,\n                    })\n                    console.error(`反馈信息删除异常：`, e)\n                }\n            }\n        }\n\n        // 修改信息\n        const updateOperation = async () => {\n            try {\n                const response = await proxy.$axios.put('/readerProposal/update', data.value)\n                proxy.$swal.fire({\n                    title: '回复成功',\n                    text: response.data.msg,\n                    icon: response.data.code === 200 ? 'success' : 'error',\n                    showConfirmButton: false,\n                    timer: 1000,\n                })\n                if (response.data.code === 200) {\n                    closeDialog()\n                    fetchFreshData()\n                    clearFormData()\n                }\n            } catch (error) {\n                console.error('提交表单时出错:', error)\n                proxy.$message.error('提交失败，请稍后再试！')\n            }\n        }\n\n        const closeDialog = () => {\n            dialogOperation.value = false\n        }\n\n        const clearFormData = () => {\n            data.value = {}\n        }\n\n        const fetchFreshData = async () => {\n            try {\n                tableData.value = []\n                let startTime = null\n                let endTime = null\n                // 请求参数\n                const params = {\n                    current: currentPage.value,\n                    size: pageSize.value,\n                    startTime: startTime,\n                    endTime: endTime,\n                    ...readingProposalQueryDto\n                }\n                const response = await proxy.$axios.post('/readerProposal/query', params)\n                const { data: responseData } = response\n                \n                // 调试输出，检查isPublish字段\n                console.log('返回的反馈数据:', responseData.data)\n                if (responseData.data && responseData.data.length > 0) {\n                    console.log('第一条数据的isPublish值:', responseData.data[0].isPublish)\n                    console.log('第一条数据的完整内容:', responseData.data[0])\n                    \n                    // 修复isPublish字段，确保是布尔值\n                    responseData.data.forEach(item => {\n                        // 如果isPublish是字符串(如\"true\"/\"false\")或数字(如0/1)，将其转换为布尔值\n                        if (typeof item.isPublish !== 'boolean') {\n                            if (item.isPublish === 'true' || item.isPublish === 1 || item.isPublish === '1') {\n                                item.isPublish = true\n                            } else {\n                                item.isPublish = false\n                            }\n                        }\n                    })\n                }\n                \n                tableData.value = responseData.data\n                totalItems.value = responseData.total\n            } catch (error) {\n                console.error('查询反馈信息异常:', error)\n            }\n        }\n\n        const handleFilter = () => {\n            currentPage.value = 1\n            fetchFreshData()\n        }\n\n        const handleFilterClear = () => {\n            handleFilter()\n        }\n\n        const handleSizeChange = (val) => {\n            pageSize.value = val\n            currentPage.value = 1\n            fetchFreshData()\n        }\n\n        const handleCurrentChange = (val) => {\n            currentPage.value = val\n            fetchFreshData()\n        }\n\n        const handleEdit = (row) => {\n            dialogOperation.value = true\n            row.userPwd = null\n            data.value = { ...row }\n        }\n\n        const handleDelete = (row) => {\n            selectedRows.value.push(row)\n            batchDelete()\n        }\n\n        // 生命周期\n        onMounted(() => {\n            fetchFreshData()\n        })\n\n        return {\n            data,\n            currentPage,\n            pageSize,\n            totalItems,\n            dialogOperation,\n            tableData,\n            selectedRows,\n            readingProposalQueryDto,\n            getCardColorClass,\n            getHeaderColorClass,\n            getReplyColorClass,\n            batchDelete,\n            updateOperation,\n            closeDialog,\n            clearFormData,\n            fetchFreshData,\n            handleFilter,\n            handleFilterClear,\n            handleSizeChange,\n            handleCurrentChange,\n            handleEdit,\n            handleDelete\n        }\n    }\n}\n</script>\n<style scoped lang=\"scss\">\n.proposal-container {\n    background-color: #FFFFFF;\n    padding: 20px 0;\n    border-radius: 16px;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n}\n\n.search-area {\n    padding: 15px 20px;\n    margin: 0 15px;\n    border-bottom: 1px solid #f5f5f5;\n}\n\n.top-bar {\n    font-size: 14px;\n    font-weight: 500;\n    color: #606266;\n    margin-right: 8px;\n    line-height: 32px;\n}\n\n// 卡片容器\n.cards-container {\n    padding: 20px;\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.card-col {\n    padding: 10px;\n    margin-bottom: 10px;\n}\n\n.feedback-card {\n    border-radius: 12px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n    overflow: hidden;\n    transition: all 0.2s ease;\n    background: #fff;\n    position: relative;\n    height: 100%;\n    \n    &:hover {\n        transform: translateY(-3px);\n        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);\n    }\n    \n    &.card-red {\n        border-top: 3px solid #ff6b6b;\n        background-color: #fff8f8;\n    }\n    \n    &.card-yellow {\n        border-top: 3px solid #feca57;\n        background-color: #fffcf5;\n    }\n    \n    &.card-green {\n        border-top: 3px solid #1dd1a1;\n        background-color: #f6fffa;\n    }\n    \n    &.card-blue {\n        border-top: 3px solid #54a0ff;\n        background-color: #f5faff;\n    }\n}\n\n.card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 15px;\n    border-bottom: 1px solid #eee;\n    \n    &.header-red {\n        background-color: #ffefef;\n        \n        .user-info i {\n            color: #ff6b6b;\n        }\n    }\n    \n    &.header-yellow {\n        background-color: #fff8e8;\n        \n        .user-info i {\n            color: #feca57;\n        }\n    }\n    \n    &.header-green {\n        background-color: #ebfff5;\n        \n        .user-info i {\n            color: #1dd1a1;\n        }\n    }\n    \n    &.header-blue {\n        background-color: #ebf5ff;\n        \n        .user-info i {\n            color: #54a0ff;\n        }\n    }\n}\n\n.user-info {\n    display: flex;\n    align-items: center;\n    \n    .avatar {\n        margin-right: 10px;\n        background-color: #fff;\n        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n        border: 2px solid #fff;\n    }\n    \n    .username {\n        font-weight: 600;\n        color: #333;\n    }\n}\n\n.status-tag {\n    display: inline-block;\n    padding: 4px 10px;\n    border-radius: 15px;\n    font-size: 12px;\n    font-weight: 500;\n    \n    &.public-tag {\n        background-color: #e1f5fe;\n        color: #039be5;\n    }\n    \n    &.private-tag {\n        background-color: #fff8e1;\n        color: #ffb300;\n    }\n}\n\n.card-content, .card-reply {\n    padding: 15px;\n    border-bottom: 1px solid #f0f0f0;\n}\n\n.section-title {\n    font-size: 14px;\n    font-weight: 600;\n    color: #606266;\n    margin: 0 0 10px 0;\n}\n\n.content-text {\n    color: #303133;\n    line-height: 1.5;\n    word-break: break-word;\n}\n\n.reply-container {\n    display: flex;\n    padding: 12px;\n    border-radius: 8px;\n    margin-top: 5px;\n    \n    &.reply-red {\n        background-color: #fff5f5;\n        \n        .reply-icon {\n            color: #ff6b6b;\n        }\n    }\n    \n    &.reply-yellow {\n        background-color: #fff9e6;\n        \n        .reply-icon {\n            color: #feca57;\n        }\n    }\n    \n    &.reply-green {\n        background-color: #e6fff2;\n        \n        .reply-icon {\n            color: #1dd1a1;\n        }\n    }\n    \n    &.reply-blue {\n        background-color: #e6f4ff;\n        \n        .reply-icon {\n            color: #54a0ff;\n        }\n    }\n}\n\n.reply-icon {\n    margin-right: 10px;\n    font-size: 18px;\n    align-self: flex-start;\n    padding-top: 2px;\n}\n\n.reply-text {\n    flex: 1;\n    color: #303133;\n    line-height: 1.6;\n    word-break: break-word;\n}\n\n.card-footer {\n    padding: 15px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-wrap: wrap;\n}\n\n.time-info {\n    color: #909399;\n    font-size: 12px;\n}\n\n.time-item {\n    margin-bottom: 5px;\n    display: flex;\n    align-items: center;\n    \n    i {\n        margin-right: 5px;\n    }\n}\n\n.card-actions {\n    display: flex;\n    gap: 8px;\n}\n\n.action-btn {\n    padding: 4px 8px;\n    font-size: 10px;\n    border-radius: 12px;\n    transition: all 0.2s;\n}\n\n.pagination {\n    margin: 15px 25px 15px 0;\n    float: right;\n}\n\n// 对话框样式\n.reply-dialog {\n    :deep(.el-dialog) {\n        border-radius: 8px;\n        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n        overflow: hidden;\n    }\n\n    :deep(.el-dialog__header),\n    :deep(.el-dialog__body) {\n        padding: 0;\n        margin: 0;\n    }\n\n    :deep(.el-dialog__headerbtn) {\n        display: none;\n    }\n}\n\n.dialog-header {\n    position: relative;\n    padding: 16px 20px;\n    background-color: #FF8C69;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.dialog-title-wrapper {\n    display: flex;\n    align-items: center;\n}\n\n.dialog-icon {\n    color: white;\n    font-size: 18px;\n    margin-right: 8px;\n}\n\n.dialog-title {\n    color: white;\n    font-size: 16px;\n    font-weight: 600;\n}\n\n.close-btn {\n    color: white;\n    cursor: pointer;\n    font-size: 18px;\n    opacity: 0.8;\n    transition: opacity 0.2s;\n    \n    &:hover {\n        opacity: 1;\n    }\n}\n\n.dialog-content {\n    padding: 20px;\n    \n    .original-content {\n        background-color: #FFF8F0;\n        border-radius: 6px;\n        padding: 15px;\n        margin-bottom: 16px;\n        border-left: 3px solid #FF8C69;\n    }\n    \n    .content-label {\n        font-size: 14px;\n        font-weight: 500;\n        color: #666;\n        margin-bottom: 8px;\n    }\n    \n    .content-text {\n        color: #333;\n        font-size: 14px;\n        line-height: 1.6;\n    }\n    \n    .reply-area {\n        position: relative;\n        \n        .char-counter {\n            position: absolute;\n            right: 5px;\n            bottom: 5px;\n            font-size: 12px;\n            color: #999;\n        }\n    }\n\n    :deep(.el-textarea__inner) {\n        border: 1px solid #ddd;\n        border-radius: 4px;\n        padding: 10px;\n        font-size: 14px;\n        \n        &:focus {\n            border-color: #FF8C69;\n            box-shadow: 0 0 0 2px rgba(255, 140, 105, 0.2);\n        }\n    }\n}\n\n.dialog-footer {\n    padding: 10px 20px 20px;\n    text-align: right;\n    \n    .cancel-btn {\n        background-color: #f5f5f5;\n        border-color: #ddd;\n        color: #666;\n        padding: 8px 15px;\n        margin-right: 10px;\n        font-size: 14px;\n        \n        &:hover {\n            background-color: #e8e8e8;\n            color: #333;\n        }\n    }\n    \n    .confirm-btn {\n        background-color: #FF8C69;\n        border-color: #FF7F50;\n        color: white;\n        padding: 8px 15px;\n        font-size: 14px;\n        \n        &:hover {\n            background-color: #FF7F50;\n            border-color: #FF6347;\n        }\n    }\n}\n\n// 特别为删除按钮添加样式\n:deep(.el-button.action-btn[type=\"danger\"]) {\n    padding: 3px 8px;\n    font-size: 10px !important;\n    border-radius: 12px;\n    height: auto;\n    line-height: 1.5;\n}\n\n:deep(.el-button--mini) {\n    font-size: 10px;\n}\n\n// 隐藏按钮图标\n.no-icon {\n    :deep(i) {\n        display: none !important;\n    }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}