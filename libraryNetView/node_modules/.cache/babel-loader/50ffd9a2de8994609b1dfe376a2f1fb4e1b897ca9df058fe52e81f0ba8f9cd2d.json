{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport * as echarts from 'echarts';\nimport { ref, onMounted, onBeforeUnmount, watch, defineProps } from 'vue';\nexport default {\n  name: 'PieChart',\n  props: {\n    types: {\n      type: Array,\n      default: []\n    },\n    values: {\n      type: Array,\n      default: []\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    tag: {\n      type: String,\n      default: '饼状图'\n    },\n    height: {\n      type: String,\n      default: '280px'\n    },\n    bag: {\n      type: String,\n      default: '#fff'\n    },\n    fontColor: {\n      type: String,\n      default: '#333'\n    }\n  },\n  setup(props) {\n    const chart = ref(null);\n    const chartRef = ref(null);\n    const handleResize = () => {\n      if (chart.value) {\n        chart.value.resize();\n      }\n    };\n    const initChart = () => {\n      if (chart.value) {\n        chart.value.dispose();\n      }\n      chart.value = echarts.init(chartRef.value);\n      let option = {\n        title: {\n          text: '',\n          subtext: '',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)',\n          backgroundColor: 'rgba(255, 255, 255, 0.9)',\n          borderColor: '#eee',\n          borderWidth: 1,\n          textStyle: {\n            color: '#333'\n          },\n          padding: [10, 15]\n        },\n        legend: {\n          type: 'plain',\n          orient: 'horizontal',\n          bottom: 0,\n          left: 'center',\n          show: true,\n          itemWidth: 12,\n          itemHeight: 12,\n          textStyle: {\n            color: '#666',\n            fontSize: 13,\n            lineHeight: 20\n          },\n          icon: 'circle',\n          itemGap: 16,\n          formatter: function (name) {\n            return name;\n          },\n          padding: 5,\n          selectedMode: false,\n          inactiveColor: '#ccc'\n        },\n        series: [{\n          name: props.tag,\n          type: 'pie',\n          radius: ['40%', '68%'],\n          center: ['50%', '38%'],\n          avoidLabelOverlap: true,\n          emphasis: {\n            label: {\n              show: true,\n              fontSize: 14,\n              fontWeight: 'bold'\n            },\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.2)'\n            }\n          },\n          labelLine: {\n            show: true,\n            smooth: true,\n            length: 10,\n            length2: 10\n          },\n          label: {\n            show: true,\n            formatter: '{d}%',\n            fontSize: 12\n          },\n          data: props.values.map((value, index) => ({\n            name: props.types[index],\n            value: value\n          })),\n          itemStyle: {\n            color: function (params) {\n              const colorList = ['#409EFF', '#67C23A', '#E6A23C', '#F56C6C', '#909399', '#7265e6', '#ffbf00'];\n              return colorList[params.dataIndex % colorList.length];\n            },\n            borderRadius: 4,\n            borderWidth: 2,\n            borderColor: '#fff'\n          }\n        }]\n      };\n      chart.value.setOption(option);\n    };\n\n    // 监听 props 变化\n    watch(() => props.types, () => {\n      initChart();\n    });\n    watch(() => props.values, () => {\n      initChart();\n    });\n    onMounted(() => {\n      initChart();\n      window.addEventListener('resize', handleResize);\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', handleResize);\n      if (chart.value) {\n        chart.value.dispose();\n      }\n    });\n    return {\n      chart,\n      chartRef\n    };\n  }\n};","map":{"version":3,"names":["echarts","ref","onMounted","onBeforeUnmount","watch","defineProps","name","props","types","type","Array","default","values","width","String","tag","height","bag","fontColor","setup","chart","chartRef","handleResize","value","resize","initChart","dispose","init","option","title","text","subtext","left","tooltip","trigger","formatter","backgroundColor","borderColor","borderWidth","textStyle","color","padding","legend","orient","bottom","show","itemWidth","itemHeight","fontSize","lineHeight","icon","itemGap","selectedMode","inactiveColor","series","radius","center","avoidLabelOverlap","emphasis","label","fontWeight","itemStyle","shadowBlur","shadowOffsetX","shadowColor","labelLine","smooth","length","length2","data","map","index","params","colorList","dataIndex","borderRadius","setOption","window","addEventListener","removeEventListener"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\components\\PieChart.vue"],"sourcesContent":["<template>\n  <div class=\"chart-container\" :style=\"{ backgroundColor: bag }\">\n    <div ref=\"chartRef\" :style=\"{ width: width, height: height }\"></div>\n  </div>\n</template>\n<script>\nimport * as echarts from 'echarts'\nimport { ref, onMounted, onBeforeUnmount, watch, defineProps } from 'vue'\n\nexport default {\n  name: 'PieChart',\n  props: {\n    types: {\n      type: Array,\n      default: []\n    },\n    values: {\n      type: Array,\n      default: []\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    tag: {\n      type: String,\n      default: '饼状图'\n    },\n    height: {\n      type: String,\n      default: '280px'\n    },\n    bag: {\n      type: String,\n      default: '#fff'\n    },\n    fontColor: {\n      type: String,\n      default: '#333'\n    },\n  },\n  setup(props) {\n    const chart = ref(null)\n    const chartRef = ref(null)\n\n    const handleResize = () => {\n      if (chart.value) {\n        chart.value.resize()\n      }\n    }\n\n    const initChart = () => {\n      if (chart.value) {\n        chart.value.dispose()\n      }\n      chart.value = echarts.init(chartRef.value)\n      let option = {\n        title: {\n          text: '',\n          subtext: '',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)',\n          backgroundColor: 'rgba(255, 255, 255, 0.9)',\n          borderColor: '#eee',\n          borderWidth: 1,\n          textStyle: {\n            color: '#333'\n          },\n          padding: [10, 15]\n        },\n        legend: {\n          type: 'plain',\n          orient: 'horizontal',\n          bottom: 0,\n          left: 'center',\n          show: true,\n          itemWidth: 12,\n          itemHeight: 12,\n          textStyle: {\n            color: '#666',\n            fontSize: 13,\n            lineHeight: 20\n          },\n          icon: 'circle',\n          itemGap: 16,\n          formatter: function(name) {\n            return name\n          },\n          padding: 5,\n          selectedMode: false,\n          inactiveColor: '#ccc'\n        },\n        series: [\n          {\n            name: props.tag,\n            type: 'pie',\n            radius: ['40%', '68%'],\n            center: ['50%', '38%'],\n            avoidLabelOverlap: true,\n            emphasis: {\n              label: {\n                show: true,\n                fontSize: 14,\n                fontWeight: 'bold'\n              },\n              itemStyle: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.2)'\n              }\n            },\n            labelLine: {\n              show: true,\n              smooth: true,\n              length: 10,\n              length2: 10\n            },\n            label: {\n              show: true,\n              formatter: '{d}%',\n              fontSize: 12\n            },\n            data: props.values.map((value, index) => ({\n              name: props.types[index],\n              value: value,\n            })),\n            itemStyle: {\n              color: function (params) {\n                const colorList = [\n                  '#409EFF', \n                  '#67C23A', \n                  '#E6A23C',\n                  '#F56C6C', \n                  '#909399',\n                  '#7265e6',\n                  '#ffbf00', \n                ]\n                return colorList[params.dataIndex % colorList.length]\n              },\n              borderRadius: 4,\n              borderWidth: 2,\n              borderColor: '#fff'\n            }\n          }\n        ]\n      }\n      chart.value.setOption(option)\n    }\n\n    // 监听 props 变化\n    watch(() => props.types, () => {\n      initChart()\n    })\n\n    watch(() => props.values, () => {\n      initChart()\n    })\n\n    onMounted(() => {\n      initChart()\n      window.addEventListener('resize', handleResize)\n    })\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', handleResize)\n      if (chart.value) {\n        chart.value.dispose()\n      }\n    })\n\n    return {\n      chart,\n      chartRef\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.chart-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}