{"ast":null,"code":"/**\n * URL助手工具函数 - 用于根据当前环境动态生成API地址\n */\n\n// 开发环境中，保留使用本地代理\nconst isDev = process.env.NODE_ENV === 'development';\n// 您的公网IP地址\nconst PUBLIC_IP = '111.49.86.107';\n// 支持的本地网络IP地址列表\nconst LOCAL_IP_LIST = ['192.168.0.100', '10.17.40.129'];\n\n/**\n * 获取当前有效的本地IP地址\n * @returns {string} 可用的本地IP地址\n */\nfunction getActiveLocalIP() {\n  // 这里使用简单的方法 - 检查当前主机名\n  const hostname = window.location.hostname;\n\n  // 如果当前hostname正好是我们支持的IP之一，直接返回\n  if (LOCAL_IP_LIST.includes(hostname)) {\n    return hostname;\n  }\n\n  // 默认返回第一个IP (首选IP)\n  return '127.0.0.1'; // 总是使用localhost对应的IP\n}\n\n/**\n * 获取基础API URL\n * @returns {string} 基础API地址\n */\nexport function getBaseUrl() {\n  const hostname = window.location.hostname;\n\n  // localhost访问时，始终使用相对路径\n  if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    return '/api/library-system-api/v1.0';\n  } else if (hostname.includes('ngrok') || hostname === PUBLIC_IP || LOCAL_IP_LIST.includes(hostname)) {\n    // 通过ngrok、公网IP或已知本地IP访问\n    return '/api/library-system-api/v1.0';\n  } else {\n    // 其他情况（如通过其他设备访问），尝试使用活跃的本地IP\n    const activeIP = getActiveLocalIP();\n    return `http://${activeIP}:2025/api/library-system-api/v1.0`;\n  }\n}\n\n/**\n * 获取文件上传URL\n * @returns {string} 文件上传地址\n */\nexport function getUploadUrl() {\n  const hostname = window.location.hostname;\n  const origin = window.location.origin; // 获取当前完整的源地址\n\n  // 本地开发环境，始终使用当前域名的路径\n  if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    return `${origin}/api/library-system-api/v1.0/file/upload`;\n  } else if (hostname.includes('ngrok') || hostname === PUBLIC_IP || LOCAL_IP_LIST.includes(hostname)) {\n    // 通过ngrok、公网IP或已知本地IP访问，使用当前域名\n    return `${origin}/api/library-system-api/v1.0/file/upload`;\n  } else {\n    // 其他情况使用活跃的本地IP\n    const activeIP = getActiveLocalIP();\n    return `http://${activeIP}:2025/api/library-system-api/v1.0/file/upload`;\n  }\n}","map":{"version":3,"names":["isDev","process","env","NODE_ENV","PUBLIC_IP","LOCAL_IP_LIST","getActiveLocalIP","hostname","window","location","includes","getBaseUrl","activeIP","getUploadUrl","origin"],"sources":["E:/code/IntelliJ_IDEAProjects/LibrarySystem/libraryNetView/src/utils/urlHelper.js"],"sourcesContent":["/**\n * URL助手工具函数 - 用于根据当前环境动态生成API地址\n */\n\n// 开发环境中，保留使用本地代理\nconst isDev = process.env.NODE_ENV === 'development';\n// 您的公网IP地址\nconst PUBLIC_IP = '111.49.86.107';\n// 支持的本地网络IP地址列表\nconst LOCAL_IP_LIST = ['192.168.0.100', '10.17.40.129'];\n\n/**\n * 获取当前有效的本地IP地址\n * @returns {string} 可用的本地IP地址\n */\nfunction getActiveLocalIP() {\n    // 这里使用简单的方法 - 检查当前主机名\n    const hostname = window.location.hostname;\n\n    // 如果当前hostname正好是我们支持的IP之一，直接返回\n    if (LOCAL_IP_LIST.includes(hostname)) {\n        return hostname;\n    }\n\n    // 默认返回第一个IP (首选IP)\n    return '127.0.0.1'; // 总是使用localhost对应的IP\n}\n\n/**\n * 获取基础API URL\n * @returns {string} 基础API地址\n */\nexport function getBaseUrl() {\n    const hostname = window.location.hostname;\n\n    // localhost访问时，始终使用相对路径\n    if (hostname === 'localhost' || hostname === '127.0.0.1') {\n        return '/api/library-system-api/v1.0';\n    } else if (hostname.includes('ngrok') || hostname === PUBLIC_IP || LOCAL_IP_LIST.includes(hostname)) {\n        // 通过ngrok、公网IP或已知本地IP访问\n        return '/api/library-system-api/v1.0';\n    } else {\n        // 其他情况（如通过其他设备访问），尝试使用活跃的本地IP\n        const activeIP = getActiveLocalIP();\n        return `http://${activeIP}:2025/api/library-system-api/v1.0`;\n    }\n}\n\n/**\n * 获取文件上传URL\n * @returns {string} 文件上传地址\n */\nexport function getUploadUrl() {\n    const hostname = window.location.hostname;\n    const origin = window.location.origin; // 获取当前完整的源地址\n\n    // 本地开发环境，始终使用当前域名的路径\n    if (hostname === 'localhost' || hostname === '127.0.0.1') {\n        return `${origin}/api/library-system-api/v1.0/file/upload`;\n    } else if (hostname.includes('ngrok') || hostname === PUBLIC_IP || LOCAL_IP_LIST.includes(hostname)) {\n        // 通过ngrok、公网IP或已知本地IP访问，使用当前域名\n        return `${origin}/api/library-system-api/v1.0/file/upload`;\n    } else {\n        // 其他情况使用活跃的本地IP\n        const activeIP = getActiveLocalIP();\n        return `http://${activeIP}:2025/api/library-system-api/v1.0/file/upload`;\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA,MAAMA,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa;AACpD;AACA,MAAMC,SAAS,GAAG,eAAe;AACjC;AACA,MAAMC,aAAa,GAAG,CAAC,eAAe,EAAE,cAAc,CAAC;;AAEvD;AACA;AACA;AACA;AACA,SAASC,gBAAgBA,CAAA,EAAG;EACxB;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ;;EAEzC;EACA,IAAIF,aAAa,CAACK,QAAQ,CAACH,QAAQ,CAAC,EAAE;IAClC,OAAOA,QAAQ;EACnB;;EAEA;EACA,OAAO,WAAW,CAAC,CAAC;AACxB;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASI,UAAUA,CAAA,EAAG;EACzB,MAAMJ,QAAQ,GAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ;;EAEzC;EACA,IAAIA,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,WAAW,EAAE;IACtD,OAAO,8BAA8B;EACzC,CAAC,MAAM,IAAIA,QAAQ,CAACG,QAAQ,CAAC,OAAO,CAAC,IAAIH,QAAQ,KAAKH,SAAS,IAAIC,aAAa,CAACK,QAAQ,CAACH,QAAQ,CAAC,EAAE;IACjG;IACA,OAAO,8BAA8B;EACzC,CAAC,MAAM;IACH;IACA,MAAMK,QAAQ,GAAGN,gBAAgB,CAAC,CAAC;IACnC,OAAO,UAAUM,QAAQ,mCAAmC;EAChE;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAAA,EAAG;EAC3B,MAAMN,QAAQ,GAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ;EACzC,MAAMO,MAAM,GAAGN,MAAM,CAACC,QAAQ,CAACK,MAAM,CAAC,CAAC;;EAEvC;EACA,IAAIP,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,WAAW,EAAE;IACtD,OAAO,GAAGO,MAAM,0CAA0C;EAC9D,CAAC,MAAM,IAAIP,QAAQ,CAACG,QAAQ,CAAC,OAAO,CAAC,IAAIH,QAAQ,KAAKH,SAAS,IAAIC,aAAa,CAACK,QAAQ,CAACH,QAAQ,CAAC,EAAE;IACjG;IACA,OAAO,GAAGO,MAAM,0CAA0C;EAC9D,CAAC,MAAM;IACH;IACA,MAAMF,QAAQ,GAAGN,gBAAgB,CAAC,CAAC;IACnC,OAAO,UAAUM,QAAQ,+CAA+C;EAC5E;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}