{"ast":null,"code":"import { ref, computed, onMounted, getCurrentInstance } from 'vue';\nimport { DataAnalysis, User, Reading, View, Connection, Message, Folder, CollectionTag, EditPen, Bell, Notebook, ChatDotSquare, Timer, Collection, DocumentRemove } from '@element-plus/icons-vue';\n\n// props: {\n//     routes: { \n//         required: true    // 父组件必须传递，否则报警告\n//     },\n//     bag: { \n//         required: false   // 可选，父组件可以不传\n//     },\n//     bag: { \n//         type: String,\n//         default: 'transparent'  // 父组件不传时使用此默认值\n//     },\n//     count: {\n//         type: Number,\n//         default: 0\n//     },\n//     options: {\n//         type: Object,\n//         default: () => ({})  // 对象/数组必须用函数返回\n//     },\n//     status: {\n//         type: String,\n//         validator: (value) => {\n//             // 只允许这三个值\n//             return ['success', 'warning', 'error'].includes(value)\n//         }\n//     },\n// },\n\nexport default {\n  name: 'AdminMenu',\n  components: {\n    DataAnalysis,\n    User,\n    Reading,\n    View,\n    Connection,\n    Message,\n    Folder,\n    CollectionTag,\n    EditPen,\n    Bell,\n    Notebook,\n    ChatDotSquare,\n    Timer,\n    Collection,\n    DocumentRemove\n  },\n  props: {\n    routes: {\n      type: Array,\n      required: true\n    },\n    flag: {\n      type: Boolean,\n      required: true\n    },\n    bag: {\n      type: String,\n      default: 'transparent'\n    }\n  },\n  emits: ['select'],\n  setup(props, {\n    emit\n  }) {\n    const {\n      proxy\n    } = getCurrentInstance();\n    const activeIndex = ref(\"1\");\n    const justSelectedPath = ref(null);\n\n    // 添加调试\n    console.log('VerticalMenu props.routes:', props.routes);\n    console.log('VerticalMenu props.routes:', props);\n\n    // 计算属性：获取当前路由路径\n    const currentRoute = computed(() => {\n      return proxy.$route.path;\n    });\n\n    // 判断当前路径是否为活动路径\n    const isActive = path => {\n      const isActivePath = proxy.$route.path === path;\n      return {\n        'active-menu-item': isActivePath,\n        'just-selected': isActivePath && justSelectedPath.value === path\n      };\n    };\n\n    // 处理菜单选择\n    /*用户点击菜单项\n        ↓\n    Element Plus 触发 select 事件\n    emit('select', index, indexPath, item)\n        ↓\n    调用 handleSelect 方法\n    handleSelect(index)\n        ↓\n    执行自定义逻辑*/\n    const handleSelect = index => {\n      activeIndex.value = index;\n      justSelectedPath.value = index;\n      emit('select', activeIndex.value);\n      sessionStorage.setItem('activeMenuItem', activeIndex.value);\n\n      // 添加刷新波动效果，并在动画结束后移除类\n      setTimeout(() => {\n        justSelectedPath.value = null;\n      }, 500);\n    };\n    onMounted(() => {\n      // 初始化时根据当前路由设置活动菜单项\n      const currentPath = proxy.$route.path;\n      activeIndex.value = currentPath;\n      sessionStorage.setItem('activeMenuItem', activeIndex.value);\n    });\n\n    // 安全地检查菜单项是否应该显示\n    const shouldShowItem = item => {\n      if (!item) return false;\n\n      // 如果有 isHidden 属性，检查它\n      if (item.hasOwnProperty('isHidden') && item.isHidden) {\n        return false;\n      }\n\n      // 如果有 show 属性，检查它\n      if (item.hasOwnProperty('show') && item.show === false) {\n        return false;\n      }\n      return true;\n    };\n    return {\n      activeIndex,\n      justSelectedPath,\n      currentRoute,\n      isActive,\n      handleSelect,\n      shouldShowItem\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","getCurrentInstance","DataAnalysis","User","Reading","View","Connection","Message","Folder","CollectionTag","EditPen","Bell","Notebook","ChatDotSquare","Timer","Collection","DocumentRemove","name","components","props","routes","type","Array","required","flag","Boolean","bag","String","default","emits","setup","emit","proxy","activeIndex","justSelectedPath","console","log","currentRoute","$route","path","isActive","isActivePath","value","handleSelect","index","sessionStorage","setItem","setTimeout","currentPath","shouldShowItem","item","hasOwnProperty","isHidden","show"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\components\\VerticalMenu.vue"],"sourcesContent":["<!--1. :collapse-transition=\"false\" 作用：禁用折叠动画过渡效果\n    2. :collapse=\"flag\" 作用：控制菜单的折叠/展开状态\n    3. class=\"admin-menu\" 作用：绑定静态 CSS 类名\n    4. :default-active=\"currentRoute\" 作用：设置当前激活的菜单项\n    5. :background-color=\"bag\" 作用：设置菜单背景色\n    6. text-color=\"#333\" 作用：设置菜单文字颜色\n    7. @select=\"handleSelect\" 作用：监听菜单项选择事件 -->\n<template>\n\t<el-menu :collapse-transition=\"false\" :collapse=\"flag\" class=\"admin-menu\"\n\t\t:default-active=\"currentRoute\" :background-color=\"bag\" text-color=\"#333\" @select=\"handleSelect\">\n\t\t<template v-for=\"(item, index) in routes\" :key=\"index\">\n\t\t\t<el-menu-item v-if=\"shouldShowItem(item)\" :index=\"item.path\"\n\t\t\t\t:class=\"isActive(item.path)\">\n\t\t\t\t<el-icon v-if=\"item.icon\">\n\t\t\t\t\t<component :is=\"item.icon\" />\n\t\t\t\t</el-icon>\n\t\t\t\t<template #title>{{ item.name }}</template>\n\t\t\t</el-menu-item>\n\t\t</template>\n\t</el-menu>\n</template>\n<script>\nimport { ref, computed, onMounted, getCurrentInstance } from 'vue'\nimport { \n\tDataAnalysis, \n\tUser, \n\tReading, \n\tView, \n\tConnection, \n\tMessage, \n\tFolder, \n\tCollectionTag, \n\tEditPen, \n\tBell, \n\tNotebook,\n\tChatDotSquare,\n\tTimer,\n\tCollection,\n\tDocumentRemove\n} from '@element-plus/icons-vue'\n\n// props: {\n    //     routes: { \n    //         required: true    // 父组件必须传递，否则报警告\n    //     },\n    //     bag: { \n    //         required: false   // 可选，父组件可以不传\n    //     },\n    //     bag: { \n    //         type: String,\n    //         default: 'transparent'  // 父组件不传时使用此默认值\n    //     },\n    //     count: {\n    //         type: Number,\n    //         default: 0\n    //     },\n    //     options: {\n    //         type: Object,\n    //         default: () => ({})  // 对象/数组必须用函数返回\n    //     },\n    //     status: {\n    //         type: String,\n    //         validator: (value) => {\n    //             // 只允许这三个值\n    //             return ['success', 'warning', 'error'].includes(value)\n    //         }\n    //     },\n    // },\n\nexport default {\n\tname: 'AdminMenu',\n\tcomponents: {\n\t\tDataAnalysis,\n\t\tUser,\n\t\tReading,\n\t\tView,\n\t\tConnection,\n\t\tMessage,\n\t\tFolder,\n\t\tCollectionTag,\n\t\tEditPen,\n\t\tBell,\n\t\tNotebook,\n\t\tChatDotSquare,\n\t\tTimer,\n\t\tCollection,\n\t\tDocumentRemove\n\t},\n    props: {\n\t\troutes: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tflag: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tbag: {\n\t\t\ttype: String,\n\t\t\tdefault: 'transparent'\n\t\t}\n\t},\n\temits: ['select'],\n\tsetup(props, { emit }) {\n\t\tconst { proxy } = getCurrentInstance()\n\t\t\n\t\tconst activeIndex = ref(\"1\")\n\t\tconst justSelectedPath = ref(null)\n\n\t\t// 添加调试\n\t\tconsole.log('VerticalMenu props.routes:', props.routes)\n        console.log('VerticalMenu props.routes:', props)\n\n\t\t// 计算属性：获取当前路由路径\n\t\tconst currentRoute = computed(() => {\n\t\t\treturn proxy.$route.path\n\t\t})\n\n\t\t// 判断当前路径是否为活动路径\n\t\tconst isActive = (path) => {\n\t\t\tconst isActivePath = proxy.$route.path === path\n\t\t\treturn {\n\t\t\t\t'active-menu-item': isActivePath,\n\t\t\t\t'just-selected': isActivePath && justSelectedPath.value === path\n\t\t\t}\n\t\t}\n\n\t\t// 处理菜单选择\n        /*用户点击菜单项\n            ↓\n        Element Plus 触发 select 事件\n        emit('select', index, indexPath, item)\n            ↓\n        调用 handleSelect 方法\n        handleSelect(index)\n            ↓\n        执行自定义逻辑*/\n\t\tconst handleSelect = (index) => {\n\t\t\tactiveIndex.value = index\n\t\t\tjustSelectedPath.value = index\n\t\t\temit('select', activeIndex.value)\n\t\t\tsessionStorage.setItem('activeMenuItem', activeIndex.value)\n\t\t\t\n\t\t\t// 添加刷新波动效果，并在动画结束后移除类\n\t\t\tsetTimeout(() => {\n\t\t\t\tjustSelectedPath.value = null\n\t\t\t}, 500)\n\t\t}\n\n\t\tonMounted(() => {\n\t\t\t// 初始化时根据当前路由设置活动菜单项\n\t\t\tconst currentPath = proxy.$route.path\n\t\t\tactiveIndex.value = currentPath\n\t\t\tsessionStorage.setItem('activeMenuItem', activeIndex.value)\n\t\t})\n\n\t\t// 安全地检查菜单项是否应该显示\n\t\tconst shouldShowItem = (item) => {\n\t\t\tif (!item) return false\n\t\t\t\n\t\t\t// 如果有 isHidden 属性，检查它\n\t\t\tif (item.hasOwnProperty('isHidden') && item.isHidden) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\t// 如果有 show 属性，检查它\n\t\t\tif (item.hasOwnProperty('show') && item.show === false) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\treturn true\n\t\t}\n\n\t\treturn {\n\t\t\tactiveIndex,\n\t\t\tjustSelectedPath,\n\t\t\tcurrentRoute,\n\t\t\tisActive,\n\t\t\thandleSelect,\n\t\t\tshouldShowItem\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n// 定义变量\n$primary-color: #409EFF;\n$secondary-color: #64B5F6;\n$hover-color: #FF6B9A;\n$transition-bezier: cubic-bezier(0.34, 1.56, 0.64, 1);\n$border-radius: 16px;\n$shadow-normal: 0 6px 20px rgba(0, 0, 0, 0.06);\n$shadow-active: 0 8px 24px rgba(64, 158, 255, 0.3);\n$shadow-active-pulse: 0 10px 30px rgba(64, 158, 255, 0.5);\n$shadow-hover: 0 6px 20px rgba(255, 107, 154, 0.2);\n\n// 共用动画\n@keyframes subtle-bounce {\n    0%, 100% { transform: translateY(0); }\n    50% { transform: translateY(-2px); }\n}\n\n@keyframes pulseActive {\n    0%, 100% { box-shadow: $shadow-active; }\n    50% { box-shadow: $shadow-active-pulse; }\n}\n\n@keyframes menu-popup {\n    from { opacity: 0; transform: translateY(10px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes menu-item-slide {\n    to { opacity: 1; transform: translateX(0); }\n}\n\n// 新增波纹动画\n@keyframes ripple {\n    0% {\n        transform: scale(0);\n        opacity: 0.6;\n    }\n    100% {\n        transform: scale(2.5);\n        opacity: 0;\n    }\n}\n\n// 新增选中后的刷新动画\n@keyframes refresh-wave {\n    0% {\n        transform: scale(0.97);\n        opacity: 0.7;\n    }\n    50% {\n        transform: scale(1.03);\n        opacity: 1;\n    }\n    100% {\n        transform: scale(1);\n        opacity: 1;\n    }\n}\n\n// 基本菜单样式\n.admin-menu {\n    border-right: none;\n    width: 100%;\n    background-color: transparent;\n    padding: 10px 12px 10px 16px;\n    box-sizing: border-box;\n    \n    // 菜单项通用样式\n    .el-menu-item {\n        height: 50px;\n        line-height: 50px;\n        margin: 8px auto;\n        border-radius: $border-radius;\n        transition: all 0.4s $transition-bezier;\n        font-size: 15px;\n        padding: 0 18px;\n        overflow: hidden;\n        position: relative;\n        width: calc(100% - 16px);\n        margin-right: 16px;\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        box-sizing: border-box;\n        \n        // 波纹效果容器\n        &::after {\n            content: '';\n            display: block;\n            position: absolute;\n            width: 100px;\n            height: 100px;\n            background: rgba(255, 255, 255, 0.8);\n            border-radius: 50%;\n            opacity: 0;\n            transform: scale(0);\n            pointer-events: none;\n            z-index: 1;\n        }\n        \n        // 触发波纹效果\n        &:active::after {\n            animation: ripple 0.6s ease-out;\n        }\n        \n        // 悬浮背景\n        &::before {\n            content: '';\n            position: absolute;\n            inset: 0;\n            border-radius: $border-radius;\n            z-index: -1;\n            opacity: 0;\n            transition: opacity 0.3s ease, transform 0.4s $transition-bezier;\n            background: linear-gradient(135deg, #ff77a9, #ff9ed4);\n            transform: scale(0.96);\n        }\n        \n        // 悬浮效果\n        &:hover {\n            background-color: transparent;\n            color: white;\n            box-shadow: $shadow-hover;\n            transform: translateY(-2px);\n            \n            &::before {\n                opacity: 1;\n                transform: scale(1);\n            }\n            \n            i {\n                color: white;\n                transform: scale(1.1) rotate(5deg);\n            }\n\n            span {\n                color: white;\n            }\n        }\n        \n        &:focus {\n            background-color: transparent;\n        }\n        \n        // 图标样式\n        i {\n            font-size: 18px;\n            margin-right: 12px;\n            color: #555;\n            transition: all 0.4s $transition-bezier;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        // 文本样式\n        span {\n            font-weight: 500;\n            color: #333;\n            transition: all 0.3s ease;\n            letter-spacing: 0.2px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            transform-origin: left center;\n        }\n    }\n    \n    // 激活状态样式\n    .active-menu-item {\n        background: linear-gradient(135deg, $primary-color, $secondary-color);\n        color: white;\n        font-weight: bold;\n        box-shadow: $shadow-active;\n        border-radius: $border-radius;\n        transform: translateY(-2px);\n        animation: pulseActive 2s infinite;\n        \n        &.just-selected {\n            animation: refresh-wave 0.5s ease-in-out, pulseActive 2s infinite 0.5s;\n        }\n        \n        &::before {\n            opacity: 0;\n        }\n        \n        i, span {\n\t\t\tcolor: white;\n\t\t}\n    }\n}\n\n// 折叠状态样式\n.el-menu--collapse {\n    width: 90px;\n    min-width: 90px;\n    padding: 10px 8px;\n    \n    .el-menu-item {\n        padding: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 50px;\n        line-height: 50px;\n        margin: 8px auto;\n        border-radius: $border-radius;\n        margin-left: auto;\n        margin-right: auto;\n        width: 60px;\n        min-width: 60px;\n        transition: all 0.4s $transition-bezier;\n        \n        // 波纹效果在折叠状态下的位置调整\n        &::after {\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%) scale(0);\n        }\n        \n        &:active::after {\n            animation: ripple 0.6s ease-out;\n        }\n        \n        i {\n            margin: 0;\n            font-size: 22px;\n            position: static;\n            transition: all 0.4s $transition-bezier;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            width: 100%;\n            height: 100%;\n        }\n        \n        span {\n            display: none;\n        }\n        \n        &:hover {\n            transform: translateY(-2px) scale(1.05);\n            box-shadow: $shadow-hover;\n            \n            i {\n                color: $hover-color;\n                transform: scale(1.15) rotate(5deg);\n            }\n        }\n    }\n    \n    .active-menu-item {\n        background: linear-gradient(135deg, $primary-color, $secondary-color);\n        box-shadow: $shadow-active;\n        animation: pulseActive 2s infinite;\n        \n        &.just-selected {\n            animation: refresh-wave 0.5s ease-in-out, pulseActive 2s infinite 0.5s;\n        }\n    }\n}\n\n// 其他样式修复和增强\n.el-menu-item.is-active {\n    border-radius: $border-radius;\n}\n\n.el-menu--collapse .el-tooltip {\n    padding: 0;\n    width: 60px;\n    min-width: 60px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.el-menu {\n    transition: width 0.4s $transition-bezier, \n                padding 0.4s $transition-bezier, \n                min-width 0.4s $transition-bezier;\n}\n\n.el-menu-item-group__title {\n    display: none;\n}\n\n// 弹出菜单动画\n.el-menu--popup {\n    min-width: 200px;\n    border-radius: 8px;\n    overflow: hidden;\n    animation: menu-popup 0.3s $transition-bezier;\n    \n    .el-menu-item {\n        height: 46px;\n        line-height: 46px;\n        margin: 4px 0;\n        animation: menu-item-slide 0.3s ease forwards;\n        opacity: 0;\n        transform: translateX(-10px);\n        \n        @for $i from 1 through 10 {\n            &:nth-child(#{$i}) {\n                animation-delay: #{$i * 0.05}s;\n            }\n        }\n    }\n}\n\n// 隐藏提示\n.el-tooltip__popper {\n    display: none;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}