{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"btn-group\"\n};\nconst _hoisted_2 = {\n  class: \"title-label\"\n};\nconst _hoisted_3 = {\n  class: \"title-label\"\n};\nconst _hoisted_4 = {\n  class: \"editor-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Close = _resolveComponent(\"Close\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_Check = _resolveComponent(\"Check\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_EditPen = _resolveComponent(\"EditPen\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_Document = _resolveComponent(\"Document\");\n  const _component_Editor = _resolveComponent(\"Editor\");\n  return _openBlock(), _createBlock(_component_el_row, {\n    class: \"common-container\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_row, {\n      class: \"action-bar\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_button, {\n        class: \"cancel-btn\",\n        size: \"small\",\n        onClick: $setup.returnToDo\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Close)]),\n          _: 1 /* STABLE */\n        }), _cache[2] || (_cache[2] = _createTextVNode(\" 取消操作 \", -1 /* CACHED */))]),\n        _: 1 /* STABLE */,\n        __: [2]\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        class: \"confirm-btn\",\n        type: \"primary\",\n        size: \"small\",\n        onClick: $setup.saveOperation\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Check)]),\n          _: 1 /* STABLE */\n        }), _createTextVNode(\" \" + _toDisplayString($setup.isUpdate ? '确认修改' : '确认新增'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_row, {\n      style: {\n        \"margin\": \"10px 16px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_row, {\n        class: \"form-item\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_2, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_EditPen)]),\n          _: 1 /* STABLE */\n        }), _cache[3] || (_cache[3] = _createTextVNode(\" 公告标题\", -1 /* CACHED */))]), _createVNode(_component_el_input, {\n          class: \"title-input\",\n          modelValue: $setup.data.name,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.data.name = $event),\n          placeholder: \"请输入公告标题\",\n          maxlength: 50,\n          \"show-word-limit\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_row, {\n        class: \"form-item\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_3, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Document)]),\n          _: 1 /* STABLE */\n        }), _cache[4] || (_cache[4] = _createTextVNode(\" 公告内容\", -1 /* CACHED */))]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_Editor, {\n          modelValue: $setup.data.content,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.data.content = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_el_row","_createVNode","_createElementVNode","_hoisted_1","_component_el_button","size","onClick","$setup","returnToDo","_component_el_icon","_component_Close","type","saveOperation","_component_Check","_toDisplayString","isUpdate","style","_hoisted_2","_component_EditPen","_component_el_input","data","name","$event","placeholder","maxlength","_hoisted_3","_component_Document","_hoisted_4","_component_Editor","content"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\views\\admin\\CreateNotice.vue"],"sourcesContent":["<template>\n    <el-row class=\"common-container\">\n        <el-row class=\"action-bar\">\n            <div class=\"btn-group\">\n                <el-button class=\"cancel-btn\" size=\"small\" @click=\"returnToDo\">\n                    <el-icon><Close /></el-icon> 取消操作\n                </el-button>\n                <el-button class=\"confirm-btn\" type=\"primary\" size=\"small\" @click=\"saveOperation\">\n                    <el-icon><Check /></el-icon> {{ isUpdate ? '确认修改' : '确认新增' }}\n                </el-button>\n            </div>\n        </el-row>\n        <el-row style=\"margin: 10px 16px;\">\n            <el-row class=\"form-item\">\n                <span class=\"title-label\"><el-icon><EditPen /></el-icon> 公告标题</span>\n                <el-input class=\"title-input\" v-model=\"data.name\" placeholder=\"请输入公告标题\" :maxlength=\"50\" show-word-limit></el-input>\n            </el-row>\n            <el-row class=\"form-item\">\n                <span class=\"title-label\"><el-icon><Document /></el-icon> 公告内容</span>\n                <div class=\"editor-container\">\n                    <Editor v-model=\"data.content\"></Editor>\n                </div>\n            </el-row>\n        </el-row>\n    </el-row>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, getCurrentInstance } from 'vue'\nimport { Close, Check, EditPen, Document } from '@element-plus/icons-vue'\nimport Editor from \"@/components/Editor\"\n\nexport default {\n    components: { \n        Editor,\n        Close,\n        Check, \n        EditPen,\n        Document\n    },\n    setup() {\n        const { proxy } = getCurrentInstance()\n        \n        // 响应式数据\n        const data = reactive({})\n        const saveApi = ref('/notice/save')\n        const updateApi = ref('/notice/update')\n        const isUpdate = ref(false)\n\n        // 方法定义\n        const saveOperation = () => {\n            if (isUpdate.value) {\n                update()\n            } else {\n                save()\n            }\n        }\n\n        const loadOperation = () => {\n            const operation = sessionStorage.getItem('noticeOperation')\n            console.log(operation)\n            if (operation === 'update') {\n                const notice = sessionStorage.getItem('noticeInfo')\n                Object.assign(data, JSON.parse(notice))\n                isUpdate.value = true\n            }\n        }\n        const update = () => {\n            proxy.$axios.put(updateApi.value, data).then(response => {\n                if (response.data.code === 200) {\n                    proxy.$swal.fire({\n                        title: '公告修改',\n                        text: '修改成功',\n                        icon: 'success',\n                        showConfirmButton: false,\n                        timer: 1000,\n                    })\n                    // 返回上一级\n                    proxy.$router.go(-1)\n                }\n            })\n        }\n\n        const save = () => {\n            proxy.$axios.post(saveApi.value, data).then(response => {\n                if (response.data.code === 200) {\n                    proxy.$swal.fire({\n                        title: '公告新增',\n                        text: '新增成功',\n                        icon: 'success',\n                        showConfirmButton: false,\n                        timer: 1000,\n                    })\n                    // 返回上一级\n                    proxy.$router.go(-1)\n                }\n            })\n        }\n\n        const returnToDo = () => {\n            proxy.$router.go(-1)\n        }\n\n        // 生命周期\n        onMounted(() => {\n            loadOperation()\n        })\n\n        return {\n            data,\n            saveApi,\n            updateApi,\n            isUpdate,\n            saveOperation,\n            loadOperation,\n            update,\n            save,\n            returnToDo\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.common-container {\n    background-color: #FFFFFF;\n    padding: 20px 0;\n    border-radius: 16px;\n    width: 100%;\n    max-width: 1200px;\n    margin: 0 auto;\n    box-sizing: border-box;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n}\n\n.action-bar {\n    padding: 10px 16px;\n    display: flex;\n    justify-content: flex-end;\n    border-bottom: 1px solid #f0f0f0;\n    margin-bottom: 15px;\n}\n\n.btn-group {\n    display: flex;\n    gap: 10px;\n}\n\n.cancel-btn {\n    color: #606266;\n    background-color: #f5f7fa;\n    border-color: #dcdfe6;\n    border-radius: 20px;\n    padding: 8px 15px;\n    font-size: 13px;\n    transition: all 0.3s;\n    \n    &:hover {\n        color: #409EFF;\n        border-color: #c6e2ff;\n        background-color: #ecf5ff;\n    }\n    \n    &:focus {\n        outline: none;\n    }\n}\n\n.confirm-btn {\n    color: white;\n    background-color: #409EFF;\n    border-radius: 20px;\n    padding: 8px 15px;\n    font-size: 13px;\n    border: none;\n    box-shadow: 0 2px 6px rgba(64, 158, 255, 0.2);\n    transition: all 0.3s;\n    \n    &:hover {\n        background-color: #66b1ff;\n        transform: translateY(-1px);\n        box-shadow: 0 4px 8px rgba(64, 158, 255, 0.3);\n    }\n    \n    &:focus {\n        outline: none;\n    }\n}\n\n.form-item {\n    margin-bottom: 20px;\n}\n\n.title-label {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n    font-size: 14px;\n    color: #606266;\n    font-weight: 500;\n    \n    .el-icon {\n        margin-right: 5px;\n        color: #409EFF;\n    }\n}\n\n.title-input {\n    width: 100%;\n    font-size: 14px;\n}\n\n.editor-container {\n    margin-top: 10px;\n    border: 1px solid #dcdfe6;\n    border-radius: 4px;\n    overflow: hidden;\n}\n</style>\n"],"mappings":";;EAGiBA,KAAK,EAAC;AAAW;;EAWZA,KAAK,EAAC;AAAa;;EAInBA,KAAK,EAAC;AAAa;;EACpBA,KAAK,EAAC;AAAkB;;;;;;;;;;;uBAlBzCC,YAAA,CAuBSC,iBAAA;IAvBDF,KAAK,EAAC;EAAkB;sBAC5B,MASS,CATTG,YAAA,CASSD,iBAAA;MATDF,KAAK,EAAC;IAAY;wBACtB,MAOM,CAPNI,mBAAA,CAOM,OAPNC,UAOM,GANFF,YAAA,CAEYG,oBAAA;QAFDN,KAAK,EAAC,YAAY;QAACO,IAAI,EAAC,OAAO;QAAEC,OAAK,EAAEC,MAAA,CAAAC;;0BAC/C,MAA4B,CAA5BP,YAAA,CAA4BQ,kBAAA;4BAAnB,MAAS,CAATR,YAAA,CAASS,gBAAA,E;;uDAAU,QAChC,oB;;;sCACAT,YAAA,CAEYG,oBAAA;QAFDN,KAAK,EAAC,aAAa;QAACa,IAAI,EAAC,SAAS;QAACN,IAAI,EAAC,OAAO;QAAEC,OAAK,EAAEC,MAAA,CAAAK;;0BAC/D,MAA4B,CAA5BX,YAAA,CAA4BQ,kBAAA;4BAAnB,MAAS,CAATR,YAAA,CAASY,gBAAA,E;;6BAAU,GAAC,GAAAC,gBAAA,CAAGP,MAAA,CAAAQ,QAAQ,mC;;;;QAIpDd,YAAA,CAWSD,iBAAA;MAXDgB,KAA0B,EAA1B;QAAA;MAAA;IAA0B;wBAC9B,MAGS,CAHTf,YAAA,CAGSD,iBAAA;QAHDF,KAAK,EAAC;MAAW;0BACrB,MAAoE,CAApEI,mBAAA,CAAoE,QAApEe,UAAoE,GAA1ChB,YAAA,CAA8BQ,kBAAA;4BAArB,MAAW,CAAXR,YAAA,CAAWiB,kBAAA,E;;uDAAU,OAAK,oB,GAC7DjB,YAAA,CAAmHkB,mBAAA;UAAzGrB,KAAK,EAAC,aAAa;sBAAUS,MAAA,CAAAa,IAAI,CAACC,IAAI;qEAATd,MAAA,CAAAa,IAAI,CAACC,IAAI,GAAAC,MAAA;UAAEC,WAAW,EAAC,SAAS;UAAEC,SAAS,EAAE,EAAE;UAAE,iBAAe,EAAf;;;UAE5FvB,YAAA,CAKSD,iBAAA;QALDF,KAAK,EAAC;MAAW;0BACrB,MAAqE,CAArEI,mBAAA,CAAqE,QAArEuB,UAAqE,GAA3CxB,YAAA,CAA+BQ,kBAAA;4BAAtB,MAAY,CAAZR,YAAA,CAAYyB,mBAAA,E;;uDAAU,OAAK,oB,GAC9DxB,mBAAA,CAEM,OAFNyB,UAEM,GADF1B,YAAA,CAAwC2B,iBAAA;sBAAvBrB,MAAA,CAAAa,IAAI,CAACS,OAAO;qEAAZtB,MAAA,CAAAa,IAAI,CAACS,OAAO,GAAAP,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}