{"ast":null,"code":"import { normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"chart-container\",\n    style: _normalizeStyle({\n      backgroundColor: $props.bag\n    })\n  }, [_createElementVNode(\"div\", {\n    ref: \"chartRef\",\n    style: _normalizeStyle({\n      width: $props.width,\n      height: $props.height\n    })\n  }, null, 4)], 4);\n}","map":{"version":3,"names":["_createElementBlock","class","style","_normalizeStyle","backgroundColor","$props","bag","_createElementVNode","ref","width","height"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\components\\PieChart.vue"],"sourcesContent":["<template>\n  <div class=\"chart-container\" :style=\"{ backgroundColor: bag }\">\n    <div ref=\"chartRef\" :style=\"{ width: width, height: height }\"></div>\n  </div>\n</template>\n<script>\nimport * as echarts from 'echarts'\nimport { ref, onMounted, onBeforeUnmount, watch, defineProps } from 'vue'\n\nexport default {\n  name: 'PieChart',\n  props: {\n    types: {\n      type: Array,\n      default: []\n    },\n    values: {\n      type: Array,\n      default: []\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    tag: {\n      type: String,\n      default: '饼状图'\n    },\n    height: {\n      type: String,\n      default: '280px'\n    },\n    bag: {\n      type: String,\n      default: '#fff'\n    },\n    fontColor: {\n      type: String,\n      default: '#333'\n    },\n  },\n  setup(props) {\n    const chart = ref(null)\n    const chartRef = ref(null)\n\n    const handleResize = () => {\n      if (chart.value) {\n        chart.value.resize()\n      }\n    }\n\n    const initChart = () => {\n      if (chart.value) {\n        chart.value.dispose()\n      }\n      chart.value = echarts.init(chartRef.value)\n      let option = {\n        title: {\n          text: '',\n          subtext: '',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}: {c} ({d}%)',\n          backgroundColor: 'rgba(255, 255, 255, 0.9)',\n          borderColor: '#eee',\n          borderWidth: 1,\n          textStyle: {\n            color: '#333'\n          },\n          padding: [10, 15]\n        },\n        legend: {\n          type: 'plain',\n          orient: 'horizontal',\n          bottom: 0,\n          left: 'center',\n          show: true,\n          itemWidth: 12,\n          itemHeight: 12,\n          textStyle: {\n            color: '#666',\n            fontSize: 13,\n            lineHeight: 20\n          },\n          icon: 'circle',\n          itemGap: 16,\n          formatter: function(name) {\n            return name\n          },\n          padding: 5,\n          selectedMode: false,\n          inactiveColor: '#ccc'\n        },\n        series: [\n          {\n            name: props.tag,\n            type: 'pie',\n            radius: ['40%', '68%'],\n            center: ['50%', '38%'],\n            avoidLabelOverlap: true,\n            emphasis: {\n              label: {\n                show: true,\n                fontSize: 14,\n                fontWeight: 'bold'\n              },\n              itemStyle: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.2)'\n              }\n            },\n            labelLine: {\n              show: true,\n              smooth: true,\n              length: 10,\n              length2: 10\n            },\n            label: {\n              show: true,\n              formatter: '{d}%',\n              fontSize: 12\n            },\n            data: props.values.map((value, index) => ({\n              name: props.types[index],\n              value: value,\n            })),\n            itemStyle: {\n              color: function (params) {\n                const colorList = [\n                  '#409EFF', \n                  '#67C23A', \n                  '#E6A23C',\n                  '#F56C6C', \n                  '#909399',\n                  '#7265e6',\n                  '#ffbf00', \n                ]\n                return colorList[params.dataIndex % colorList.length]\n              },\n              borderRadius: 4,\n              borderWidth: 2,\n              borderColor: '#fff'\n            }\n          }\n        ]\n      }\n      chart.value.setOption(option)\n    }\n\n    // 监听 props 变化\n    watch(() => props.types, () => {\n      initChart()\n    })\n\n    watch(() => props.values, () => {\n      initChart()\n    })\n\n    onMounted(() => {\n      initChart()\n      window.addEventListener('resize', handleResize)\n    })\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', handleResize)\n      if (chart.value) {\n        chart.value.dispose()\n      }\n    })\n\n    return {\n      chart,\n      chartRef\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.chart-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n</style>\n"],"mappings":";;uBACEA,mBAAA,CAEM;IAFDC,KAAK,EAAC,iBAAiB;IAAEC,KAAK,EAAAC,eAAA;MAAAC,eAAA,EAAqBC,MAAA,CAAAC;IAAG;MACzDC,mBAAA,CAAoE;IAA/DC,GAAG,EAAC,UAAU;IAAEN,KAAK,EAAAC,eAAA;MAAAM,KAAA,EAAWJ,MAAA,CAAAI,KAAK;MAAAC,MAAA,EAAUL,MAAA,CAAAK;IAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}