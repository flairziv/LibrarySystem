{"ast":null,"code":"import * as echarts from 'echarts';\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue';\nexport default {\n  name: 'LineChart',\n  props: {\n    tag: {\n      type: String,\n      default: '折线图'\n    },\n    values: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    date: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    height: {\n      type: String,\n      default: '280px'\n    }\n  },\n  setup(props) {\n    const chart = ref(null);\n    const chartRef = ref(null);\n    const handleResize = () => {\n      if (chart.value) {\n        chart.value.resize();\n      }\n    };\n\n    // 图表初始化\n    const initChart = () => {\n      // 添加数据验证\n      if (!props.values || !Array.isArray(props.values) || props.values.length === 0 || !props.date || !Array.isArray(props.date) || props.date.length === 0) {\n        console.warn('LineChart: 数据为空或格式不正确', {\n          values: props.values,\n          date: props.date\n        });\n        return;\n      }\n      if (chart.value) {\n        chart.value.dispose();\n      }\n      chart.value = echarts.init(chartRef.value);\n      const option = {\n        grid: {\n          left: 30,\n          right: 30,\n          bottom: 30,\n          top: 40,\n          containLabel: true\n        },\n        tooltip: {\n          trigger: 'axis',\n          backgroundColor: 'rgba(255,255,255,0.9)',\n          borderColor: '#ccc',\n          borderWidth: 1,\n          textStyle: {\n            color: '#333'\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: props.date,\n          axisTick: {\n            alignWithLabel: true\n          },\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            lineStyle: {\n              color: '#e0e0e0'\n            }\n          }\n        },\n        series: [{\n          name: props.tag,\n          type: 'line',\n          data: props.values,\n          smooth: true,\n          lineStyle: {\n            color: '#409EFF',\n            width: 3\n          },\n          itemStyle: {\n            color: '#409EFF',\n            borderColor: '#fff',\n            borderWidth: 3\n          }\n        }]\n      };\n      chart.value.setOption(option);\n    };\n\n    // 监听数据变化\n    watch(() => [props.values, props.date], () => {\n      if (props.values && props.values.length > 0 && props.date && props.date.length > 0) {\n        initChart();\n      }\n    }, {\n      deep: true\n    });\n    onMounted(() => {\n      // 延迟初始化，确保数据已加载\n      setTimeout(() => {\n        if (props.values && props.values.length > 0 && props.date && props.date.length > 0) {\n          initChart();\n        }\n      }, 100);\n      window.addEventListener('resize', handleResize);\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', handleResize);\n      if (chart.value) {\n        chart.value.dispose();\n      }\n    });\n    return {\n      chart,\n      chartRef\n    };\n  }\n};","map":{"version":3,"names":["echarts","ref","onMounted","onBeforeUnmount","watch","name","props","tag","type","String","default","values","Array","required","date","height","setup","chart","chartRef","handleResize","value","resize","initChart","isArray","length","console","warn","dispose","init","option","grid","left","right","bottom","top","containLabel","tooltip","trigger","backgroundColor","borderColor","borderWidth","textStyle","color","xAxis","data","axisTick","alignWithLabel","axisLine","lineStyle","yAxis","series","smooth","width","itemStyle","setOption","deep","setTimeout","window","addEventListener","removeEventListener"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\components\\LineChart.vue"],"sourcesContent":["<template>\r\n  <div class=\"chart-container\">\r\n    <div ref=\"chartRef\" :style=\"{ width: '100%', height: height }\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\r\n\r\nexport default {\r\n  name: 'LineChart',\r\n  props: {\r\n    tag: {\r\n      type: String,\r\n      default: '折线图'\r\n    },\r\n    values: {\r\n      type: Array,\r\n      required: true,\r\n      default: () => []\r\n    },\r\n    date: {\r\n      type: Array,\r\n      required: true,\r\n      default: () => []\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '280px'\r\n    },\r\n  },\r\n  setup(props) {\r\n    const chart = ref(null)\r\n    const chartRef = ref(null)\r\n\r\n    const handleResize = () => {\r\n      if (chart.value) {\r\n        chart.value.resize()\r\n      }\r\n    }\r\n\r\n    // 图表初始化\r\n    const initChart = () => {\r\n      // 添加数据验证\r\n      if (!props.values || !Array.isArray(props.values) || props.values.length === 0 ||\r\n          !props.date || !Array.isArray(props.date) || props.date.length === 0) {\r\n        console.warn('LineChart: 数据为空或格式不正确', { values: props.values, date: props.date })\r\n        return\r\n      }\r\n\r\n      if (chart.value) {\r\n        chart.value.dispose()\r\n      }\r\n      \r\n      chart.value = echarts.init(chartRef.value)\r\n      \r\n      const option = {\r\n        grid: {\r\n          left: 30,\r\n          right: 30,\r\n          bottom: 30,\r\n          top: 40,\r\n          containLabel: true\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          backgroundColor: 'rgba(255,255,255,0.9)',\r\n          borderColor: '#ccc',\r\n          borderWidth: 1,\r\n          textStyle: {\r\n            color: '#333'\r\n          }\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: props.date,\r\n          axisTick: {\r\n            alignWithLabel: true\r\n          },\r\n          axisLine: {\r\n            lineStyle: {\r\n              color: '#e0e0e0'\r\n            }\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          axisLine: {\r\n            lineStyle: {\r\n              color: '#e0e0e0'\r\n            }\r\n          }\r\n        },\r\n        series: [{\r\n          name: props.tag,\r\n          type: 'line',\r\n          data: props.values,\r\n          smooth: true,\r\n          lineStyle: {\r\n            color: '#409EFF',\r\n            width: 3\r\n          },\r\n          itemStyle: {\r\n            color: '#409EFF',\r\n            borderColor: '#fff',\r\n            borderWidth: 3\r\n          }\r\n        }]\r\n      }\r\n      \r\n      chart.value.setOption(option)\r\n    }\r\n\r\n    // 监听数据变化\r\n    watch(() => [props.values, props.date], () => {\r\n      if (props.values && props.values.length > 0 && props.date && props.date.length > 0) {\r\n        initChart()\r\n      }\r\n    }, { deep: true })\r\n\r\n    onMounted(() => {\r\n      // 延迟初始化，确保数据已加载\r\n      setTimeout(() => {\r\n        if (props.values && props.values.length > 0 && props.date && props.date.length > 0) {\r\n          initChart()\r\n        }\r\n      }, 100)\r\n      window.addEventListener('resize', handleResize)\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      window.removeEventListener('resize', handleResize)\r\n      if (chart.value) {\r\n        chart.value.dispose()\r\n      }\r\n    })\r\n\r\n    return {\r\n      chart,\r\n      chartRef\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.chart-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: relative;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}