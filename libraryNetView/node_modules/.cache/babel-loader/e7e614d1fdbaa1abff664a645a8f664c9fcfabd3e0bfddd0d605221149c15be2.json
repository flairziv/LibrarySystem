{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted, getCurrentInstance } from 'vue';\nimport { Refresh, Bell, Timer, InfoFilled } from '@element-plus/icons-vue';\nimport LineChart from \"@/components/LineChart\";\nimport PieChart from \"@/components/PieChart\";\nexport default {\n  components: {\n    LineChart,\n    PieChart,\n    Refresh,\n    Bell,\n    Timer,\n    InfoFilled\n  },\n  setup() {\n    const {\n      proxy\n    } = getCurrentInstance();\n\n    // 响应式数据\n    const userValues = ref([]);\n    const userDates = ref([]);\n    const modelDates = ref([]);\n    const modelValues = ref([]);\n    const pieValues = ref([]);\n    const pieTypes = ref([]);\n    const noticeList = ref([]);\n    const userDateRange = ref('365');\n    const bookDateRange = ref('365');\n\n    // 方法定义\n    // 加载消息数据\n    const loadMessage = () => {\n      const messageQueryDto = {\n        current: 1,\n        size: 4\n      };\n      proxy.$axios.post(`/notice/query`, messageQueryDto).then(response => {\n        const {\n          data\n        } = response;\n        if (data.code === 200) {\n          noticeList.value = data.data;\n        }\n      });\n    };\n    const loadPieCharts = () => {\n      proxy.$axios.get(`/views/staticControls`).then(response => {\n        const {\n          data\n        } = response;\n        if (data.code === 200) {\n          pieValues.value = data.data.map(entity => entity.count);\n          pieTypes.value = data.data.map(entity => entity.name);\n        }\n      });\n    };\n    const modelDatesSelected = time => {\n      if (typeof time === 'object') {\n        time = bookDateRange.value;\n      } else {\n        bookDateRange.value = time.toString();\n      }\n      proxy.$axios.get(`/book/daysQuery/${time}`).then(response => {\n        const {\n          data\n        } = response;\n        if (data.code === 200) {\n          modelValues.value = data.data.map(entity => entity.count);\n          modelDates.value = data.data.map(entity => entity.name);\n        }\n      });\n    };\n    const userDatesSelected = time => {\n      if (typeof time === 'object') {\n        time = userDateRange.value;\n      } else {\n        userDateRange.value = time.toString();\n      }\n      proxy.$axios.get(`/user/daysQuery/${time}`).then(response => {\n        const {\n          data\n        } = response;\n        if (data.code === 200) {\n          userValues.value = data.data.map(entity => entity.count);\n          userDates.value = data.data.map(entity => entity.name);\n        }\n      });\n    };\n\n    // 生命周期\n    onMounted(() => {\n      // 默认查365天\n      userDatesSelected(365);\n      // 默认查365天\n      modelDatesSelected(365);\n      loadPieCharts();\n      loadMessage();\n    });\n    return {\n      userValues,\n      userDates,\n      modelDates,\n      modelValues,\n      pieValues,\n      pieTypes,\n      noticeList,\n      userDateRange,\n      bookDateRange,\n      loadMessage,\n      loadPieCharts,\n      modelDatesSelected,\n      userDatesSelected\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","getCurrentInstance","Refresh","Bell","Timer","InfoFilled","LineChart","PieChart","components","setup","proxy","userValues","userDates","modelDates","modelValues","pieValues","pieTypes","noticeList","userDateRange","bookDateRange","loadMessage","messageQueryDto","current","size","$axios","post","then","response","data","code","value","loadPieCharts","get","map","entity","count","name","modelDatesSelected","time","toString","userDatesSelected"],"sources":["E:\\code\\IntelliJ_IDEAProjects\\LibrarySystem\\libraryNetView\\src\\views\\admin\\Main.vue"],"sourcesContent":["<template>\n    <div class=\"dashboard-container\">\n        <el-row :gutter=\"24\">\n            <el-col :xs=\"24\" :sm=\"24\" :md=\"8\" :lg=\"8\" :xl=\"8\">\n                <div class=\"dashboard-card data-card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">基础数据</h3>\n                    </div>\n                    <PieChart fontColor=\"#333\" bag=\"rgba(255, 255, 255, 0.6)\" :values=\"pieValues\"\n                        :types=\"pieTypes\" />\n                </div>\n                <div class=\"dashboard-card notice-card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">最新公告</h3>\n                        <div class=\"card-actions\">\n                            <el-button type=\"text\" size=\"small\" @click=\"loadMessage\">\n                                <el-icon><Refresh /></el-icon>刷新\n                            </el-button>\n                        </div>\n                    </div>\n                    <div class=\"notice-list\">\n                        <div class=\"notice-item\" v-for=\"(notice, index) in noticeList\" :key=\"index\">\n                            <div class=\"notice-title\">\n                                <el-icon><Bell /></el-icon>\n                                {{ notice.name }}\n                            </div>\n                            <div class=\"time-info\">\n                                <el-icon><Timer /></el-icon>\n                                {{ notice.createTime }}\n                            </div>\n                        </div>\n                        <div class=\"empty-notice\" v-if=\"noticeList.length === 0\">\n                            <el-icon><InfoFilled /></el-icon>\n                            <span>暂无公告</span>\n                        </div>\n                    </div>\n                </div>\n            </el-col>\n            <el-col :xs=\"24\" :sm=\"24\" :md=\"16\" :lg=\"16\" :xl=\"16\">\n                <div class=\"dashboard-card chart-card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">用户数变化趋势</h3>\n                        <div class=\"card-actions\">\n                            <el-radio-group v-model=\"userDateRange\" size=\"small\" @change=\"userDatesSelected\">\n                                <el-radio-button label=\"7\">7天</el-radio-button>\n                                <el-radio-button label=\"30\">30天</el-radio-button>\n                                <el-radio-button label=\"365\">365天</el-radio-button>\n                            </el-radio-group>\n                        </div>\n                    </div>\n                    <LineChart height=\"310px\" tag=\"用户数\" @on-selected=\"userDatesSelected\" :values=\"userValues\"\n                        :date=\"userDates\" />\n                </div>\n                <div class=\"dashboard-card chart-card\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">图书上架趋势</h3>\n                        <div class=\"card-actions\">\n                            <el-radio-group v-model=\"bookDateRange\" size=\"small\" @change=\"modelDatesSelected\">\n                                <el-radio-button label=\"7\">7天</el-radio-button>\n                                <el-radio-button label=\"30\">30天</el-radio-button>\n                                <el-radio-button label=\"365\">365天</el-radio-button>\n                            </el-radio-group>\n                        </div>\n                    </div>\n                    <LineChart height=\"310px\" tag=\"图书上架情况\" @on-selected=\"modelDatesSelected\" :values=\"modelValues\"\n                        :date=\"modelDates\" />\n                </div>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n<script>\nimport { ref, onMounted, getCurrentInstance } from 'vue'\nimport { Refresh, Bell, Timer, InfoFilled } from '@element-plus/icons-vue'\nimport LineChart from \"@/components/LineChart\"\nimport PieChart from \"@/components/PieChart\"\n\nexport default {\n    components: { \n        LineChart, \n        PieChart,\n        Refresh,\n        Bell,\n        Timer,\n        InfoFilled\n    },\n    setup() {\n        const { proxy } = getCurrentInstance()\n        \n        // 响应式数据\n        const userValues = ref([])\n        const userDates = ref([])\n        const modelDates = ref([])\n        const modelValues = ref([])\n        const pieValues = ref([])\n        const pieTypes = ref([])\n        const noticeList = ref([])\n        const userDateRange = ref('365')\n        const bookDateRange = ref('365')\n\n        // 方法定义\n        // 加载消息数据\n        const loadMessage = () => {\n            const messageQueryDto = {\n                current: 1,\n                size: 4\n            }\n            proxy.$axios.post(`/notice/query`, messageQueryDto).then(response => {\n                const { data } = response\n                if (data.code === 200) {\n                    noticeList.value = data.data\n                }\n            })\n        }\n\n        const loadPieCharts = () => {\n            proxy.$axios.get(`/views/staticControls`).then(response => {\n                const { data } = response\n                if (data.code === 200) {\n                    pieValues.value = data.data.map(entity => entity.count)\n                    pieTypes.value = data.data.map(entity => entity.name)\n                }\n            })\n        }\n\n        const modelDatesSelected = (time) => {\n            if (typeof time === 'object') {\n                time = bookDateRange.value\n            } else {\n                bookDateRange.value = time.toString()\n            }\n            \n            proxy.$axios.get(`/book/daysQuery/${time}`).then(response => {\n                const { data } = response\n                if (data.code === 200) {\n                    modelValues.value = data.data.map(entity => entity.count)\n                    modelDates.value = data.data.map(entity => entity.name)\n                }\n            })\n        }\n\n        const userDatesSelected = (time) => {\n            if (typeof time === 'object') {\n                time = userDateRange.value\n            } else {\n                userDateRange.value = time.toString()\n            }\n            \n            proxy.$axios.get(`/user/daysQuery/${time}`).then(response => {\n                const { data } = response\n                if (data.code === 200) {\n                    userValues.value = data.data.map(entity => entity.count)\n                    userDates.value = data.data.map(entity => entity.name)\n                }\n            })\n        }\n\n        // 生命周期\n        onMounted(() => {\n            // 默认查365天\n            userDatesSelected(365)\n            // 默认查365天\n            modelDatesSelected(365)\n            loadPieCharts()\n            loadMessage()\n        })\n\n        return {\n            userValues,\n            userDates,\n            modelDates,\n            modelValues,\n            pieValues,\n            pieTypes,\n            noticeList,\n            userDateRange,\n            bookDateRange,\n            loadMessage,\n            loadPieCharts,\n            modelDatesSelected,\n            userDatesSelected\n        }\n    }\n}\n</script>\n<style scoped lang=\"scss\">\n.dashboard-container {\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n    box-sizing: border-box;\n    overflow: auto;\n    background-color: #ffffff;\n}\n\n.dashboard-card {\n    background-color: #ffffff;\n    border-radius: 16px;\n    padding: 20px;\n    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.05);\n    transition: all 0.3s ease;\n    border: 1px solid rgba(240, 240, 240, 0.8);\n    margin-bottom: 24px;\n    overflow: hidden;\n    \n    &:hover {\n        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\n        transform: translateY(-2px);\n    }\n}\n\n.card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n    padding-bottom: 12px;\n}\n\n.card-title {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #333;\n    position: relative;\n    padding-left: 12px;\n    \n    &::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        height: 16px;\n        width: 4px;\n        background-color: #409EFF;\n        border-radius: 2px;\n    }\n}\n\n.card-actions {\n    display: flex;\n    align-items: center;\n}\n\n.chart-card {\n    height: calc(50% - 12px);\n}\n\n.data-card {\n    height: calc(45% - 12px);\n}\n\n.notice-card {\n    height: calc(55% - 12px);\n}\n\n.notice-list {\n    overflow-y: auto;\n    max-height: calc(100% - 50px);\n    padding: 0 4px;\n}\n\n.notice-item {\n    margin-bottom: 16px;\n    padding: 12px;\n    border-radius: 8px;\n    background-color: #f9f9f9;\n    transition: all 0.2s ease;\n    \n    &:hover {\n        background-color: #f0f7ff;\n        transform: translateX(4px);\n    }\n    \n    &:last-child {\n        margin-bottom: 0;\n    }\n}\n\n.notice-title {\n    margin: 4px 0 8px;\n    cursor: pointer;\n    \n    i {\n        margin-right: 6px;\n        color: #409EFF;\n    }\n    \n    span {\n        font-size: 15px;\n        color: #333;\n        font-weight: 500;\n    }\n    \n    &:hover span {\n        color: #409EFF;\n    }\n}\n\n.notice-time {\n    i {\n        margin-right: 6px;\n        color: #909399;\n        font-size: 12px;\n    }\n    \n    span {\n        font-size: 13px;\n        color: #909399;\n    }\n}\n\n.empty-notice {\n    text-align: center;\n    padding: 30px 0;\n    color: #909399;\n    \n    i {\n        font-size: 24px;\n        margin-bottom: 8px;\n        display: block;\n    }\n    \n    span {\n        font-size: 14px;\n    }\n}\n\n@media screen and (max-width: 768px) {\n    .dashboard-container {\n        padding: 12px;\n    }\n    \n    .dashboard-card {\n        margin-bottom: 16px;\n        padding: 16px;\n    }\n    \n    .chart-card, .data-card, .notice-card {\n        height: auto;\n    }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}