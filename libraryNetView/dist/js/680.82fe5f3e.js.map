{"version":3,"file":"js/680.82fe5f3e.js","mappings":"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","sources":["webpack://prosonal-health-web/./src/views/user/BookSave.vue","webpack://prosonal-health-web/./src/views/user/BookSave.vue?74d0"],"sourcesContent":["<template>\n    <div class=\"book-save-view-container\">\n        <div class=\"word-search\" v-if=\"tableData.length !== 0\">\n            <div class=\"item\">\n                <el-icon><Search /></el-icon>\n                <input type=\"text\" placeholder=\"书籍ID\" v-model=\"bookSaveQueryDto.bookId\">\n                <span class=\"search-text\" @click=\"fetchFreshData\">搜索</span>\n            </div>\n        </div>\n        <el-row v-if=\"tableData.length === 0\">\n            <el-empty description=\"暂无收藏书籍\"></el-empty>\n        </el-row>\n        <div v-else class=\"book-save-container\">\n            <div class=\"book-save-table\">\n                <div class=\"save-book header\">\n                    <div class=\"title\">书籍名</div>\n                    <div class=\"title\">作者</div>\n                    <div class=\"title\">馆藏数</div>\n                    <div class=\"title\">书籍所在</div>\n                    <div class=\"title\">功能操作</div>\n                </div>\n                <div class=\"save-book\" v-for=\"(save, index) in tableData\" :key=\"index\">\n                    <div>\n                        {{ save.bookName }}\n                    </div>\n                    <div>\n                        {{ save.author }}\n                    </div>\n                    <div>\n                        {{ save.num }}\n                    </div>\n                    <div>\n                        {{ parseLocation(save) }}\n                    </div>\n                    <div class=\"action-buttons\">\n                        <button class=\"action-btn borrow\" @click=\"handleEdit(save)\">\n                            <el-icon><Reading /></el-icon> 借书\n                        </button>\n                        <button class=\"action-btn cancel\" @click=\"handleDelete(save)\">\n                            <el-icon><StarFilled /></el-icon> 取消收藏\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"pager\" v-if=\"tableData.length !== 0\">\n            <div>\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n                    v-model:current-page=\"current\" :page-size=\"size\" layout=\"total, prev, pager, next\"\n                    :total=\"totalCount\">\n                </el-pagination>\n            </div>\n        </div>\n        <el-dialog :show-close=\"false\" v-model=\"dialogOperation\" width=\"400px\" custom-class=\"borrow-dialog\">\n            <div class=\"dialog-header\">\n                <h3 class=\"dialog-title\">借阅信息</h3>\n            </div>\n            <div class=\"dialog-content\">\n                <div class=\"form-group\">\n                    <label class=\"form-label\"><el-icon><Goods /></el-icon> 借书数量</label>\n                    <el-input-number style=\"width: 100%;\" size=\"small\" v-model=\"data.deadlineNum\" :min=\"1\" :max=\"10\"\n                        label=\"数量\" controls-position=\"right\"></el-input-number>\n                </div>\n                <div class=\"form-group\">\n                    <label class=\"form-label\"><el-icon><Calendar /></el-icon> 归还日期</label>\n                    <el-date-picker style=\"width: 100%;\" size=\"small\" v-model=\"data.returnTime\" type=\"date\"\n                        placeholder=\"选择归还日期\" value-format=\"yyyy-MM-dd\">\n                    </el-date-picker>\n                </div>\n                <div class=\"borrow-notice\">\n                    <el-icon><InfoFilled /></el-icon>\n                    <span>请在选定日期前归还图书</span>\n                </div>\n            </div>\n            <div class=\"dialog-footer\">\n                <el-button class=\"cancel-btn\" size=\"small\" @click=\"cannel()\">取消操作</el-button>\n                <el-button class=\"confirm-btn\" type=\"primary\" size=\"small\" @click=\"addOperation\">确定借书</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, getCurrentInstance } from 'vue'\nimport { Search, Reading, StarFilled, Goods, Calendar, InfoFilled } from '@element-plus/icons-vue'\n\nexport default {\n    components: {\n        Search,\n        Reading, \n        StarFilled,\n        Goods,\n        Calendar,\n        InfoFilled\n    },\n    setup() {\n        const { proxy } = getCurrentInstance()\n        \n        // 响应式数据\n        const data = reactive({})\n        const current = ref(1)\n        const cover = ref(null)\n        const size = ref(10)\n        const totalCount = ref(0)\n        const dialogOperation = ref(false) // 开关\n        const isOperation = ref(false) // 开关-标识新增或修改\n        const tableData = ref([])\n        const selectedRows = ref([])\n        const bookSaveQueryDto = reactive({}) // 搜索条件\n        const options = ref([])\n        const bookshelfOptions = ref([])\n        const bookOrderHistorys = ref([])\n        const searchTime = ref([])\n\n        // 方法\n        const cannel = () => {\n            Object.assign(data, {});\n            dialogOperation.value = false;\n            isOperation.value = false;\n        }\n\n        // 借书操作\n        const addOperation = async () => {\n            try {\n                if (data.deadlineNum === undefined || data.returnTime === undefined) {\n                    proxy.$notify({\n                        duration: 1000,\n                        title: '操作反馈',\n                        message: '请填入信息',\n                        type: 'info'\n                    });\n                    return;\n                }\n                const response = await proxy.$axios.post('/bookOrderHistory/save', data);\n                if (response.data.code === 200) {\n                    fetchFreshData();\n                    Object.assign(data, {});\n                    dialogOperation.value = false;\n                    proxy.$notify({\n                        title: '借书结果',\n                        message: '借书成功，请及时归还',\n                        type: 'success'\n                    });\n                } else {\n                    proxy.$notify({\n                        title: '借书结果',\n                        message: response.data.msg,\n                        type: 'error'\n                    });\n                }\n            } catch (error) {\n                proxy.$notify({\n                    title: '借书结果',\n                    message: error,\n                    type: 'error'\n                });\n            }\n        }\n\n        const parseLocation = (data) => {\n            return data.floor + '-' + data.area + '-' + data.frame;\n        }\n\n        const bookshelfConfig = (item) => {\n            return item.floor + \"-\" + item.area + \"-\" + item.frame;\n        }\n\n        const fetchBookshelf = () => {\n            proxy.$axios.post('bookshelf/query', {}).then(res => {\n                if (res.data.code === 200) {\n                    bookshelfOptions.value = res.data.data;\n                }\n            })\n        }\n\n        const fetchCategory = () => {\n            proxy.$axios.post('category/query', {}).then(res => {\n                if (res.data.code === 200) {\n                    options.value = res.data.data;\n                }\n            })\n        }\n\n        const resetQueryCondition = () => {\n            Object.assign(bookSaveQueryDto, {});\n            fetchFreshData();\n        }\n\n        // 查询用户的预约记录\n        const getBookOrderHistory = () => {\n            proxy.$axios.post('bookOrderHistory/queryUser', {}).then(res => {\n                if (res.data.code === 200) {\n                    bookOrderHistorys.value = res.data.data;\n                }\n            })\n        }\n\n        // 信息新增\n        const returnOperation = async () => {\n            try {\n                // 发之前，组装数据\n                const bookOrderHsitory = {\n                    id: data.id,\n                    isReturn: true\n                }\n                const response = await proxy.$axios.put('/bookSave/update', bookOrderHsitory);\n                if (response.data.code === 200) {\n                    fetchFreshData();\n                    Object.assign(data, {});\n                    dialogOperation.value = false;\n                    proxy.$notify({\n                        title: '还书结果',\n                        message: '还书成功',\n                        type: 'success'\n                    });\n                } else {\n                    proxy.$notify({\n                        title: '还书结果',\n                        message: response.data.msg,\n                        type: 'error'\n                    });\n                }\n            } catch (error) {\n                proxy.$notify({\n                    title: '还书结果',\n                    message: error,\n                    type: 'error'\n                });\n            }\n        }\n\n        const closeDialog = () => {\n            dialogOperation.value = false;\n        }\n\n        const clearFormData = () => {\n            Object.assign(data, {});\n            cover.value = null;\n        }\n\n        const fetchFreshData = async () => {\n            try {\n                tableData.value = [];\n                // 请求参数\n                const params = {\n                    current: current.value,\n                    size: size.value,\n                    ...bookSaveQueryDto\n                };\n                const response = await proxy.$axios.post('/bookSave/queryUser', params);\n                const { data: responseData } = response;\n                tableData.value = responseData.data;\n                totalCount.value = responseData.total;\n            } catch (error) {\n                console.error('借阅历史信息异常:', error);\n            }\n        }\n\n        const add = () => {\n            dialogOperation.value = true;\n        }\n\n        const handleFilter = () => {\n            current.value = 1;\n            fetchFreshData();\n        }\n\n        const handleFilterClear = () => {\n            handleFilter();\n        }\n\n        const handleSizeChange = (val) => {\n            size.value = val;\n            current.value = 1;\n            fetchFreshData();\n        }\n\n        const handleCurrentChange = (val) => {\n            current.value = val;\n            fetchFreshData();\n        }\n\n        const messagePush = (row) => {\n            Object.assign(data, { ...row });\n        }\n\n        const handleEdit = (row) => {\n            dialogOperation.value = true;\n            Object.assign(data, { ...row });\n        }\n\n        const handleDelete = (row) => {\n            batchDelete(row);\n        }\n\n        // 批量删除数据\n        const batchDelete = async (save) => {\n            const confirmed = await proxy.$swalConfirm({\n                title: '取消收藏？',\n                text: `操作不可回复，是否继续？`,\n                icon: 'warning',\n            });\n            if (confirmed) {\n                try {\n                    let ids = [save.id];\n                    const response = await proxy.$axios.post(`/bookSave/batchDelete`, ids);\n                    if (response.data.code === 200) {\n                        proxy.$notify({\n                            duration: 1000,\n                            title: '取消收藏操作',\n                            message: '取消收藏成功',\n                            type: 'success'\n                        });\n                        fetchFreshData();\n                    }\n                } catch (e) {\n                    proxy.$notify({\n                        duration: 3000,\n                        title: '取消收藏操作',\n                        message: e,\n                        type: 'error'\n                    });\n                    console.error(`取消收藏异常：`, e);\n                }\n            }\n        }\n\n        // 生命周期\n        onMounted(() => {\n            fetchFreshData();\n            fetchCategory();\n            fetchBookshelf();\n        })\n\n        return {\n            data,\n            current,\n            cover,\n            size,\n            totalCount,\n            dialogOperation,\n            isOperation,\n            tableData,\n            selectedRows,\n            bookSaveQueryDto,\n            options,\n            bookshelfOptions,\n            bookOrderHistorys,\n            searchTime,\n            cannel,\n            addOperation,\n            parseLocation,\n            bookshelfConfig,\n            fetchBookshelf,\n            fetchCategory,\n            resetQueryCondition,\n            getBookOrderHistory,\n            returnOperation,\n            closeDialog,\n            clearFormData,\n            fetchFreshData,\n            add,\n            handleFilter,\n            handleFilterClear,\n            handleSizeChange,\n            handleCurrentChange,\n            messagePush,\n            handleEdit,\n            handleDelete,\n            batchDelete\n        }\n    }\n};\n</script>\n<style scoped lang=\"scss\">\n.book-save-view-container {\n    padding: 10px;\n    border-radius: 16px;\n    background-color: transparent;\n    backdrop-filter: none;\n    box-shadow: none;\n}\n\n.word-search {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 20px;\n\n    .item {\n        padding: 10px 20px;\n        width: 500px;\n        background-color: rgba(255, 255, 255, 0.8);\n        backdrop-filter: blur(10px);\n        border-radius: 40px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        box-sizing: border-box;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.06);\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        transition: all 0.3s ease;\n\n        &:hover, &:focus-within {\n            box-shadow: 0 6px 16px rgba(255, 87, 34, 0.12);\n            border-color: rgba(255, 87, 34, 0.2);\n        }\n\n        input {\n            flex: 1;\n            border: none;\n            background-color: transparent;\n            outline: none;\n            font-size: 16px;\n            color: #333;\n            margin: 0 15px;\n            height: 24px;\n        }\n\n        i {\n            font-size: 18px;\n            color: #ff5722;\n        }\n\n        .search-text {\n            display: inline-block;\n            padding: 6px 16px;\n            border-radius: 20px;\n            background-color: #ff5722;\n            color: white;\n            font-size: 14px;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            text-align: center;\n            \n            &:hover {\n                background-color: #f4511e;\n                transform: translateY(-1px);\n            }\n        }\n    }\n}\n\n.book-save-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 20px 0;\n}\n\n.book-save-table {\n    width: 90%;\n    max-width: 1200px;\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.05);\n    background-color: rgba(255, 255, 255, 0.8);\n    backdrop-filter: blur(8px);\n}\n\n.save-book {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid rgba(240, 240, 240, 0.5);\n    transition: all 0.3s ease;\n    \n    &:last-child {\n        border-bottom: none;\n    }\n\n    div {\n        padding: 16px 20px;\n        flex: 1;\n        min-width: 120px;\n        color: #333;\n        font-size: 14px;\n        \n        &:last-child {\n            flex: 1;\n            min-width: 200px;\n            display: flex;\n            justify-content: flex-start;\n        }\n    }\n\n    .title {\n        font-weight: 600;\n        color: #555;\n    }\n\n    .action-buttons {\n        display: flex;\n        gap: 10px;\n        justify-content: flex-start;\n    }\n\n    .action-btn {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        padding: 3px 8px !important;\n        border-radius: 12px !important;\n        font-size: 11px !important;\n        cursor: pointer;\n        transition: all 0.3s ease;\n        min-width: 60px !important;\n        height: auto !important;\n        border: 1px solid transparent;\n        width: auto !important;\n        \n        i {\n            margin-right: 3px;\n            font-size: 11px !important;\n        }\n        \n        &.borrow {\n            background-color: rgba(255, 87, 34, 0.08);\n            color: #ff5722;\n            border-color: rgba(255, 87, 34, 0.2);\n            \n            &:hover {\n                background-color: rgba(255, 87, 34, 0.12);\n                transform: translateY(-1px);\n                box-shadow: 0 2px 5px rgba(255, 87, 34, 0.15);\n            }\n        }\n        \n        &.cancel {\n            background-color: rgba(64, 158, 255, 0.08);\n            color: #409eff;\n            border-color: rgba(64, 158, 255, 0.2);\n            \n            &:hover {\n                background-color: rgba(64, 158, 255, 0.12);\n                transform: translateY(-1px);\n                box-shadow: 0 2px 5px rgba(64, 158, 255, 0.15);\n            }\n        }\n    }\n}\n\n.save-book:hover {\n    background-color: rgba(249, 249, 249, 0.5);\n}\n\n.save-book.header {\n    background-color: rgba(245, 247, 250, 0.6);\n    border-bottom: 1px solid rgba(235, 238, 245, 0.5);\n    \n    &:hover {\n        background-color: rgba(245, 247, 250, 0.6);\n    }\n}\n\n.pager {\n    display: flex;\n    margin: 30px 0;\n    justify-content: center;\n    align-items: center;\n}\n\n.borrow-dialog {\n    :deep(.el-dialog) {\n        border-radius: 16px;\n        overflow: hidden;\n        background-color: rgba(255, 255, 255, 0.95);\n        backdrop-filter: blur(10px);\n        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n    }\n\n    :deep(.el-dialog__header) {\n        display: none;\n    }\n\n    :deep(.el-dialog__body) {\n        padding: 0;\n    }\n}\n\n.dialog-header {\n    background-color: rgba(249, 249, 249, 0.7);\n    padding: 14px 20px;\n    border-bottom: 1px solid rgba(235, 238, 245, 0.5);\n}\n\n.dialog-title {\n    font-size: 16px;\n    font-weight: 600;\n    color: #303133;\n    margin: 0;\n    padding: 0;\n    position: relative;\n    display: inline-block;\n    \n    &:after {\n        content: '';\n        position: absolute;\n        bottom: -6px;\n        left: 0;\n        width: 30px;\n        height: 2px;\n        background-color: #ff5722;\n    }\n}\n\n.dialog-content {\n    padding: 16px 20px;\n}\n\n.dialog-footer {\n    padding: 10px 20px 16px;\n    text-align: right;\n    border-top: 1px solid rgba(235, 238, 245, 0.5);\n    background-color: rgba(249, 249, 249, 0.3);\n}\n\n.form-group {\n    margin-bottom: 16px;\n}\n\n.form-label {\n    font-size: 14px;\n    color: #606266;\n    margin-bottom: 8px;\n    font-weight: 500;\n    display: block;\n    \n    i {\n        margin-right: 5px;\n        color: #ff5722;\n    }\n}\n\n.borrow-notice {\n    background-color: rgba(255, 248, 230, 0.8);\n    border-radius: 4px;\n    padding: 10px 12px;\n    font-size: 12px;\n    color: #e6a23c;\n    display: flex;\n    align-items: flex-start;\n    margin-top: 16px;\n    \n    i {\n        margin-right: 6px;\n        margin-top: 2px;\n    }\n    \n    span {\n        line-height: 1.4;\n    }\n}\n\n.cancel-btn, .confirm-btn {\n    padding: 7px 16px;\n    font-size: 13px;\n    border-radius: 20px;\n    \n    &:focus {\n        outline: none;\n    }\n}\n\n.cancel-btn {\n    background-color: rgba(245, 247, 250, 0.8);\n    color: #606266;\n    border: 1px solid rgba(220, 223, 230, 0.7);\n    \n    &:hover {\n        color: #409EFF;\n        border-color: rgba(198, 226, 255, 0.7);\n        background-color: rgba(236, 245, 255, 0.8);\n    }\n}\n\n.confirm-btn {\n    background-color: #ff5722;\n    color: white;\n    border: none;\n    box-shadow: 0 2px 6px rgba(255, 87, 34, 0.2);\n    \n    &:hover {\n        background-color: #f4511e;\n        transform: translateY(-1px);\n        box-shadow: 0 4px 8px rgba(255, 87, 34, 0.3);\n    }\n}\n\n/* 分页组件样式 */\n:deep(.el-pagination) {\n    padding: 15px 0;\n    text-align: center;\n}\n\n:deep(.el-pagination .btn-prev),\n:deep(.el-pagination .btn-next),\n:deep(.el-pager li) {\n    border-radius: 8px;\n    transition: all 0.3s ease;\n    background-color: rgba(255, 255, 255, 0.7);\n}\n\n:deep(.el-pager li.active) {\n    background-color: #ff5722;\n    color: white;\n}\n</style>\n","import { render } from \"./BookSave.vue?vue&type=template&id=f3519e7e&scoped=true\"\nimport script from \"./BookSave.vue?vue&type=script&lang=js\"\nexport * from \"./BookSave.vue?vue&type=script&lang=js\"\n\nimport \"./BookSave.vue?vue&type=style&index=0&id=f3519e7e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f3519e7e\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$setup","tableData","length","_hoisted_2","_createElementVNode","_hoisted_3","_createVNode","_component_el_icon","_component_Search","type","placeholder","bookSaveQueryDto","bookId","$event","onClick","_cache","args","fetchFreshData","_createBlock","_component_el_row","key","_component_el_empty","description","_hoisted_4","_hoisted_5","_Fragment","_renderList","save","index","_toDisplayString","bookName","author","num","parseLocation","_hoisted_6","handleEdit","_component_Reading","handleDelete","_component_StarFilled","_hoisted_9","_component_el_pagination","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","current","size","layout","total","totalCount","_component_el_dialog","dialogOperation","width","_hoisted_10","_hoisted_11","_hoisted_12","_component_Goods","_component_el_input_number","style","data","deadlineNum","min","max","label","_hoisted_13","_hoisted_14","_component_Calendar","_component_el_date_picker","returnTime","_hoisted_15","_component_InfoFilled","_hoisted_16","_component_el_button","cannel","addOperation","components","Search","Reading","StarFilled","Goods","Calendar","InfoFilled","setup","proxy","getCurrentInstance","reactive","ref","cover","isOperation","selectedRows","options","bookshelfOptions","bookOrderHistorys","searchTime","Object","assign","value","async","undefined","$notify","duration","title","message","response","$axios","post","code","msg","error","floor","area","frame","bookshelfConfig","item","fetchBookshelf","then","res","fetchCategory","resetQueryCondition","getBookOrderHistory","returnOperation","bookOrderHsitory","id","isReturn","put","closeDialog","clearFormData","params","responseData","console","add","handleFilter","handleFilterClear","val","messagePush","row","batchDelete","confirmed","$swalConfirm","text","icon","ids","e","onMounted","__exports__","render"],"sourceRoot":""}