"use strict";(self["webpackChunkprosonal_health_web"]=self["webpackChunkprosonal_health_web"]||[]).push([[865],{81:function(e,t,n){var o=n(9565),r=n(9306),a=n(8551),i=n(6823),s=n(851),u=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(r(n))return a(o(n,e));throw new u(i(e)+" is not iterable")}},116:function(e,t,n){var o=n(6518),r=n(9565),a=n(2652),i=n(9306),s=n(8551),u=n(1767),l=n(9539),c=n(4549),f=c("find",TypeError);o({target:"Iterator",proto:!0,real:!0,forced:f},{find:function(e){s(this);try{i(e)}catch(o){l(this,"throw",o)}if(f)return r(f,this,e);var t=u(this),n=0;return a(t,function(t,o){if(e(t,n++))return o(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},851:function(e,t,n){var o=n(6955),r=n(5966),a=n(4117),i=n(6269),s=n(8227),u=s("iterator");e.exports=function(e){if(!a(e))return r(e,u)||r(e,"@@iterator")||i[o(e)]}},2140:function(e,t,n){var o=n(8227),r=o("toStringTag"),a={};a[r]="z",e.exports="[object z]"===String(a)},2652:function(e,t,n){var o=n(6080),r=n(9565),a=n(8551),i=n(6823),s=n(4209),u=n(6198),l=n(1625),c=n(81),f=n(851),p=n(9539),h=TypeError,d=function(e,t){this.stopped=e,this.result=t},g=d.prototype;e.exports=function(e,t,n){var m,v,w,k,b,R,y,C=n&&n.that,S=!(!n||!n.AS_ENTRIES),I=!(!n||!n.IS_RECORD),T=!(!n||!n.IS_ITERATOR),x=!(!n||!n.INTERRUPTED),E=o(t,C),O=function(e){return m&&p(m,"normal"),new d(!0,e)},L=function(e){return S?(a(e),x?E(e[0],e[1],O):E(e[0],e[1])):x?E(e,O):E(e)};if(I)m=e.iterator;else if(T)m=e;else{if(v=f(e),!v)throw new h(i(e)+" is not iterable");if(s(v)){for(w=0,k=u(e);k>w;w++)if(b=L(e[w]),b&&l(g,b))return b;return new d(!1)}m=c(e,v)}R=I?e.next:m.next;while(!(y=r(R,m)).done){try{b=L(y.value)}catch(_){p(m,"throw",_)}if("object"==typeof b&&b&&l(g,b))return b}return new d(!1)}},3977:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o=n(641),r=n(33);const a={class:"nav-wrapper"},i={class:"main"},s={class:"page-header"},u={class:"header-title"},l={class:"header-actions"},c={class:"content-section"};function f(e,t,n,f,p,h){const d=(0,o.g2)("UserNavigation"),g=(0,o.g2)("el-icon"),m=(0,o.g2)("EditPen"),v=(0,o.g2)("el-tooltip"),w=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["menu-container",{"collapsed-menu":f.flag}])},[(0,o.Lk)("div",a,[(0,o.bF)(d,{routes:f.userRoutes,"current-route-name":f.nowRoute.name,"user-info":f.userInfo,"is-collapsed":f.flag,"user-center-path":f.selfPath,onRouteClick:f.routerClick,onToggleCollapse:f.toggleSidebar,onLogout:f.loginOut},null,8,["routes","current-route-name","user-info","is-collapsed","user-center-path","onRouteClick","onToggleCollapse","onLogout"])]),(0,o.Lk)("div",{class:(0,r.C4)(["main-wrapper",{"main-wrapper-expanded":f.flag}])},[(0,o.Lk)("div",i,[(0,o.Lk)("div",s,[(0,o.Lk)("div",u,[f.nowRoute.icon?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)(()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(f.nowRoute.icon)))]),_:1})):(0,o.Q3)("",!0),(0,o.Lk)("span",null,(0,r.v_)(f.nowRoute.name||"首页"),1)]),(0,o.Lk)("div",l,["/main"===f.nowRoute.path?((0,o.uX)(),(0,o.Wv)(v,{key:0,content:"添加留言",placement:"bottom",effect:"light"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"action-btn",onClick:t[0]||(t[0]=e=>f.handleAction("add"))},[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[(0,o.bF)(m)]),_:1})])]),_:1})):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",c,[(0,o.bF)(w,{ref:"currentView"},null,512)])])],2)],2)}n(4114),n(8111),n(116);var p=n(953),h=n(5220),d=n(5720),g=(n(9325),n(2272)),m=n(7309),v=n(8548),w={name:"UserHome",components:{UserNavigation:m.A,EditPen:v.EditPen},setup(){const{proxy:e}=(0,o.nI)(),t=(0,h.rd)(),n=(0,h.lq)(),r=(0,p.Kh)({name:"个人中心",path:"/mySelf"}),a=(0,p.KR)([{path:"/main",name:"留言",icon:"ChatDotSquare",show:!0},{path:"/bookOperation",name:"借阅",icon:"Reading",show:!0},{path:"/bookOrderHistory",name:"历史",icon:"Timer",show:!0},{path:"/bookSave",name:"收藏",icon:"Collection",show:!0},{path:"/bookRssHistory",name:"订阅",icon:"Connection",show:!0},{path:"/rssNotification",name:"通知",icon:"Message",show:!0},{path:"/userOperationLog",name:"日志",icon:"Notebook",show:!0},{path:"/notice",name:"公告",icon:"Bell",show:!0}]),i=(0,p.Kh)({id:null,url:"",name:"",role:null,email:""}),s=(0,p.KR)(!1),u=(0,p.Kh)({name:"",path:"",icon:null}),l=(0,p.KR)(null),c=e=>{"/main"===u.path&&"add"===e&&l.value&&l.value.postWord&&l.value.postWord()},f=()=>{s.value=!s.value,sessionStorage.setItem("flag",s.value)},m=e=>{k(e)},v=async()=>{const n=await e.$swalConfirm({title:"退出登录？",text:"退出后需重新登录",icon:"warning",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消",confirmButtonColor:"#ff5722",cancelButtonColor:"#909399"});n&&(e.$swal.fire({title:"退出登录成功",text:"1s 后返回登录页面",icon:"success",showConfirmButton:!1,timer:1e3}),setTimeout(()=>{(0,g.L)(),t.push("/login")},1e3))},w=()=>{s.value="true"===sessionStorage.getItem("flag")},k=e=>{u.name!==e.name&&(Object.assign(u,e),t.push(e.path))},b=async()=>{try{const n=await d.A.get("user/auth");if(400===n.data.code)return e.$message.error(n.data.msg),void t.push("/login");const{id:o,userAvatar:r,userName:a,userRole:s,userEmail:u}=n.data.data;Object.assign(i,{id:o,url:r,name:a,role:s,email:u}),sessionStorage.setItem("userInfo",JSON.stringify(i)),sessionStorage.setItem("userId",i.id)}catch(n){console.error("获取用户认证信息时发生错误:",n),e.$message.error("认证信息加载失败，请重试！")}},R=()=>{const e=n.path,t=a.value.find(t=>t.path===e);return!!t&&(Object.assign(u,t),!0)};return(0,o.wB)(()=>n.path,()=>{R()}),(0,o.sV)(()=>{b(),w(),!R()&&a.value.length>0&&m(a.value[0])}),{selfPath:r,userRoutes:a,userInfo:i,flag:s,nowRoute:u,currentView:l,handleAction:c,toggleSidebar:f,routerClick:m,loginOut:v,menuOperationHistory:w,handleRouteSelect:k,tokenCheckLoad:b,updateCurrentRoute:R}}},k=n(6262);const b=(0,k.A)(w,[["render",f],["__scopeId","data-v-b075b73c"]]);var R=b},4209:function(e,t,n){var o=n(8227),r=n(6269),a=o("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[a]===e)}},6080:function(e,t,n){var o=n(7476),r=n(9306),a=n(616),i=o(o.bind);e.exports=function(e,t){return r(e),void 0===t?e:a?i(e,t):function(){return e.apply(t,arguments)}}},6269:function(e){e.exports={}},6955:function(e,t,n){var o=n(2140),r=n(4901),a=n(2195),i=n(8227),s=i("toStringTag"),u=Object,l="Arguments"===a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=o?a:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=u(e),s))?n:l?a(t):"Object"===(o=a(t))&&r(t.callee)?"Arguments":o}},7476:function(e,t,n){var o=n(2195),r=n(9504);e.exports=function(e){if("Function"===o(e))return r(e)}}}]);
//# sourceMappingURL=865.11fc6a34.js.map