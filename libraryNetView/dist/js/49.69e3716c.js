"use strict";(self["webpackChunkprosonal_health_web"]=self["webpackChunkprosonal_health_web"]||[]).push([[49],{4114:function(e,t,n){var r=n(6518),o=n(8981),l=n(6198),a=n(4527),s=n(6837),i=n(9039),c=i(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=c||!u();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=o(this),n=l(t),r=arguments.length;s(n+r);for(var i=0;i<r;i++)t[n]=arguments[i],n++;return a(t,n),n}})},4376:function(e,t,n){var r=n(2195);e.exports=Array.isArray||function(e){return"Array"===r(e)}},4527:function(e,t,n){var r=n(3724),o=n(4376),l=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(o(e)&&!a(e,"length").writable)throw new l("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},5049:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(641),o=n(3751);const l={class:"login-container",ref:"container"},a={class:"particles-container"},s={class:"login-panel",ref:"loginPanel"},i={class:"right-login"},c={class:"input-group"},u={class:"input-item"},d={class:"input-item"},p={class:"login-action"},g={class:"tip"};function f(e,t,n,f,v,k){const h=(0,r.g2)("User"),L=(0,r.g2)("el-icon"),m=(0,r.g2)("Lock");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",a,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(30,e=>(0,r.Lk)("div",{class:"particle",key:e})),64))]),t[10]||(t[10]=(0,r.Lk)("div",{class:"light-effect light-1"},null,-1)),t[11]||(t[11]=(0,r.Lk)("div",{class:"light-effect light-2"},null,-1)),(0,r.Lk)("div",s,[t[9]||(t[9]=(0,r.Lk)("div",{class:"left-image"},[(0,r.Lk)("img",{src:"/bag.png",alt:"装饰图",class:"floating"}),(0,r.Lk)("div",{class:"logo-overlay"},[(0,r.Lk)("div",{class:"logo-text"},"Book")])],-1)),(0,r.Lk)("div",i,[t[8]||(t[8]=(0,r.Lk)("div",{class:"login-header"},[(0,r.Lk)("h2",null,"欢迎登录"),(0,r.Lk)("p",{class:"login-subtitle"},"图书管理系统")],-1)),(0,r.Lk)("div",c,[(0,r.Lk)("div",u,[(0,r.bF)(L,{class:"icon-user"},{default:(0,r.k6)(()=>[(0,r.bF)(h)]),_:1}),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>f.act=e),class:"input-field",placeholder:"请输入账号"},null,512),[[o.Jo,f.act]]),t[4]||(t[4]=(0,r.Lk)("span",{class:"input-focus-border"},null,-1))]),(0,r.Lk)("div",d,[(0,r.bF)(L,{class:"icon-lock"},{default:(0,r.k6)(()=>[(0,r.bF)(m)]),_:1}),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>f.pwd=e),class:"input-field",type:"password",placeholder:"请输入密码"},null,512),[[o.Jo,f.pwd]]),t[5]||(t[5]=(0,r.Lk)("span",{class:"input-focus-border"},null,-1))])]),(0,r.Lk)("div",p,[(0,r.Lk)("button",{class:"login-btn",onClick:t[2]||(t[2]=(...e)=>f.login&&f.login(...e))},t[6]||(t[6]=[(0,r.Lk)("span",null,"登录",-1),(0,r.Lk)("i",{class:"btn-icon"},"→",-1)]))]),(0,r.Lk)("div",g,[(0,r.Lk)("p",null,[t[7]||(t[7]=(0,r.eW)("没有账号？",-1)),(0,r.Lk)("span",{class:"register-link",onClick:t[3]||(t[3]=(...e)=>f.toDoRegister&&f.toDoRegister(...e))},"立即注册")])])])],512)],512)}n(4114);var v=n(953),k=n(5220),h=n(8548),L=n(5720),m=n(2272),y=n(3386),b=n.n(y),w=n(5215);const x=1300;var C={name:"Login",components:{Logo:w.A,User:h.User,Lock:h.Lock},setup(){const{proxy:e}=(0,r.nI)(),t=(0,k.rd)(),n=(0,v.KR)(""),o=(0,v.KR)(""),l=(0,v.KR)("rgb(38,38,38)"),a=(0,v.KR)(null),s=(0,v.KR)(null),i=()=>{t.push("/register")},c=()=>{const e=a.value,t=s.value;e&&t&&(e.addEventListener("mousemove",e=>{const n=e.clientX/window.innerWidth,r=e.clientY/window.innerHeight;t.style.transform=`\n                    translateY(-5px)\n                    perspective(1000px)\n                    rotateX(${5*(r-.5)}deg) \n                    rotateY(${-5*(n-.5)}deg)\n                `;const o=document.querySelector(".light-1"),l=document.querySelector(".light-2");o&&(o.style.transform=`translate(${30*n}px, ${30*r}px)`),l&&(l.style.transform=`translate(${20*-n}px, ${20*-r}px)`)}),e.addEventListener("mouseleave",()=>{t.style.transform="translateY(-5px)"}))},u=async()=>{if(!n.value||!o.value)return void e.$swal.fire({title:"填写校验",text:"账号或密码不能为空",icon:"error",showConfirmButton:!1,timer:x});const t=b()(b()(o.value)),r={userAccount:n.value,userPwd:t};try{const{data:t}=await L.A.post("user/login",r);if(200!==t.code)return void e.$swal.fire({title:"登录失败",text:t.msg,icon:"error",showConfirmButton:!1,timer:x});(0,m.WG)(t.data.token),setTimeout(()=>{const{role:e}=t.data;d(e)},x)}catch(l){console.error("登录请求错误:",l),e.$message.error("登录请求出错，请重试！")}},d=e=>{switch(e){case 1:t.push("/admin");break;case 2:t.push("/user");break;default:console.warn("未知的角色类型:",e);break}};return(0,r.sV)(()=>{c()}),{act:n,pwd:o,colorLogo:l,container:a,loginPanel:s,toDoRegister:i,addMouseInteraction:c,login:u,navigateToRole:d}}},_=n(6262);const A=(0,_.A)(C,[["render",f],["__scopeId","data-v-c86db50e"]]);var E=A},5215:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(641),o=n(33);function l(e,t,n,l,a,s){return(0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)(["logo-container",{"logo-collapsed":n.flag}])},[t[0]||(t[0]=(0,r.Lk)("img",{src:"/logo.png",class:"logo-image",alt:"Logo"},null,-1)),n.flag?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("span",{key:0,class:"logo-text",style:(0,o.Tr)({color:n.bag})},(0,o.v_)(n.name),5))],2)}var a={name:"Logo",props:{name:{type:String,default:"系统"},flag:{type:Boolean,required:!1},bag:{type:String,default:"#1c1c1c"}}},s=n(6262);const i=(0,s.A)(a,[["render",l],["__scopeId","data-v-ef4d2f90"]]);var c=i},6837:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}}}]);
//# sourceMappingURL=49.69e3716c.js.map